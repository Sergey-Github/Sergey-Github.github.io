<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<h1>1. Классификации информационно-вычислительных сетей (ИВС). Основные понятия и определения</h1>

<h3>Базовые понятия и определения телекоммуникационных сетей.</h3>
<p><strong>Коммуникационная сеть</strong> - система, состоящая из объектов, называемых пунктами (узлами) сети и осуществляющих функции генерации, преобразования, хранения и потребления некоторого продукта, а также линий передачи (связи, коммуникаций, соединений) для осуществления передачи продукта между пунктами. В качестве продукта может выступать энергия, информация, масса.&nbsp;</p>
<p><strong>Информационно-вычислительная сеть(ИВС)</strong> - коммуникационная сеть, в которой продуктом генерирования, переработки, хранения и использования является информация, а узлами сети служит вычислительное оборудование. Компонентами ИВС могут выступать ЭВМ, периферийные устройства, являющиеся источниками и приемниками данных. Пересылка данных происходит с помощью сред и средств, объединяемых термином <strong>"среда передачи данных"</strong>.</p>
<p>Введем дополнительные определения, используемые при работе с телекоммуникационными сетями.</p>
<p><strong>Абонентская система (АС)</strong>– совокупность абонента (объекта, генерирующего и потребляющего информацию) и рабочий станции (РС).</p>

<p><strong>Рабочая станция (РС)</strong> – система оборудования конечного пользователя сети, включающая сетевой компьютер вместе с периферийными средствами ввода-вывода и программным обеспечением, средства связи с коммуникационной подсетью.</p>

<p><strong>Коммуникационная подсеть (или телекоммуникационная система – ТКС)</strong> – это совокупность физической среды передачи информации, аппаратных и программных средств, обеспечивающих взаимодействие АС.</p>

<p>Телекоммуникационные сети могут работать в различных режимах: обмена данными между АС, запроса и выдачи информации, сбора информации, пакетной обработки данных по запросам пользователей с удаленных терминалов, в диалоговых режимах. Возможности той или иной телекоммуникационной сети определяются ее информационным, аппаратным и программным обеспечением.</p>
<p><strong>Информационное обеспечение сети</strong> представляет собой единый информационный фонд, ориентированный на решаемые в сети задачи. <br>&nbsp;<br><strong>Аппаратное&nbsp; обеспечение</strong>&nbsp; составляют&nbsp; компьютеры&nbsp; различных&nbsp; типов,&nbsp; оборудование абонентских систем, средства систем связи и узлов связи,&nbsp; аппаратура&nbsp; связи&nbsp; и согласования&nbsp; работы сетей одного и того же уровня&nbsp; или&nbsp; различных&nbsp; уровней.&nbsp;&nbsp; </p>
<p><strong>Программное&nbsp; обеспечение (ПО)</strong>&nbsp; сетей&nbsp; отличается&nbsp; большим&nbsp; многообразием как&nbsp; по&nbsp; своему&nbsp; составу,&nbsp; так&nbsp; и&nbsp; по&nbsp; перечню&nbsp; решаемых&nbsp; задач.&nbsp; В&nbsp; общем&nbsp; виде функции&nbsp; ПО сети заключаются в следующем: планирование, организация и осуществление&nbsp; коллективного&nbsp; доступа&nbsp; пользователей&nbsp; к&nbsp; общесетевым&nbsp; ресурсам –&nbsp; телекоммуникационным,&nbsp; вычислительным,&nbsp; информационным,&nbsp; программным;&nbsp; автоматизация&nbsp; процессов&nbsp; программирования&nbsp; задач&nbsp; обработки информации;&nbsp; динамическое&nbsp; распределение&nbsp; и&nbsp; перераспределение&nbsp; общесетевых ресурсов с целью повышения оперативности и надежности удовлетворения запросов пользователей и т. д. </p>

<h3>Классификация телекоммуникационных сетей</h3>
<p>Классификация компьютерных сетей осуществляется по наиболее характерным признакам – структурным, функциональным, информационным.</p>
<p>По степени территориальной рассредоточенности основных элементов сети (абонентских систем, узлов связи) различают:</p>
<p><strong>Территориальные</strong> - охватывающие значительное географическое пространство. Среди <em>территориальных</em> сетей выделяют:</p>
<p><strong>Глобальные&nbsp; компьютерные&nbsp; сети</strong> <strong>(ГКС)</strong> - объединяют&nbsp; абонентские&nbsp; системы, рассредоточенные&nbsp; на&nbsp; большой&nbsp; территории,&nbsp; охватывающей&nbsp; различные&nbsp; страны и континенты.</p>
<p><br><strong>Региональные&nbsp; компьютерные&nbsp; сети (РКС)</strong> - объединяют&nbsp; абонентские&nbsp; системы, расположенные&nbsp; в&nbsp; пределах&nbsp; отдельного&nbsp; региона –&nbsp; города,&nbsp; административного района;&nbsp; функционируют&nbsp; в&nbsp; интересах&nbsp; организаций&nbsp; и&nbsp; пользователей&nbsp; региона&nbsp; и,&nbsp; как&nbsp; правило,&nbsp; имеют&nbsp; выход&nbsp; в&nbsp; ГКС.&nbsp;</p>
<p>Английское название территориальных сетей связи (глобальных) - <strong>Wide Area Network (WAN)</strong>,&nbsp; а региональные (чаще - городские) сети именуются - <strong>Metropolitan Area Network (MAN)</strong>.</p>
<p><strong>Локальные&nbsp; компьютерные&nbsp; сети (ЛКС/ЛВС)</strong> - объединяют&nbsp; абонентские&nbsp; системы, расположенные в пределах небольшой территории (этаж здания, здание, несколько зданий одного и того же предприятия). К классу ЛКС относятся сети предприятий,&nbsp; фирм,&nbsp; банков,&nbsp; офисов,&nbsp; учебных&nbsp; заведений&nbsp; и&nbsp; т.&nbsp; д.</p>
<p><strong>Корпоративные сети (сети масштаба предприятия)</strong> - обычно выделяют в отдельный класс и включают в это понятие совокупность связанных между собой ЛВС территории, на которых размещено предприятие, и которые функционируют в интересах одного предприятия.</p>
<p>Объединение различных сетей позволяет создавать сложные взаимосвязанные иерархии.</p>

<h1>2. Топологии ИВС. Виды и способы коммутации</h1>
<p>В зависимости от <strong>топологии</strong> - конфигурации элементов в сети, сети подразделяют на сети следующих типов:</p>
<table border="0">
<tbody>
<tr>
<td>1) топология <strong>"общая шина"</strong> - все элементы сети включаются в единую общую среду (шину)</td>
<td><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3470/t1.jpg" height="140" width="400"></td>
</tr>
<tr>
<td>2) топология <strong>"звезда"</strong> - элементы сети связаны с единым центром</td>
<td><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3470/t2.jpg" height="294" width="324"></td>
</tr>
<tr>
<td>3) топология <strong>"кольцо"</strong> - элементы связаны между собой таким образом, что общая цепочка замыкается в своеобразное кольцо</td>
<td><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3470/t3.jpg" height="218" width="292"></td>
</tr>
<tr>
<td>4) <strong>"ячеистая"</strong> топология, в которой каждый элемент имеет выделенную связь с&nbsp; другими элементом сети</td>
<td><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3470/t4.jpg" height="218" width="249"></td>
</tr>
<tr>
<td>5) <strong>"иерархическая"</strong> топология - связи между элементами сети подчинены определенной "иерархии"</td>
<td><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3470/t5.jpg" height="334" width="334"></td>
</tr>
<tr>
<td>6) <strong>"смешанная"</strong> топология - как правило сочетает в себе набор упомянутых ранее топологий, и сочетание топологий отвечает конкретным реализациям технических и организационных мероприятий по проектированию и развертыванию сети</td>
<td></td>
</tr>
</tbody>
</table>
<p></p>
<p>В зависимости от распределения функциональной нагрузки сети вводится подразделение на сети технологии <strong>"клиент-сервер"</strong>, где одна часть элементов является поставщиком определенных услуг, а вторая часть - потребителем; и <strong>"одноранговые"</strong> сети - где все элементы имеют более менее равноправные позиции.</p>
<p>Вне зависимости от топологии сети, передача данных подразумевает задействование для этих целей канала связи между элементами сети. Способ передачи данных и использования для этого доступных каналов связи между элементами сети называется <strong>"коммутацией"</strong>. В зависимости от способа коммутации различаются следующие виды сетей:</p>
<ol>
<li><strong>Сети с коммутацией каналов</strong> - соединение двух или более элементов сети с последующим удержанием (монопольным использованием) канала связи на весь период времени информационного обмена, пока это соединение не будет принудительно разомкнуто.</li>
<li><strong>Сети с коммутацией сообщений</strong> - пересылка информационных сообщений без нарушения их целостности с поочередным занятием требуемых каналов связи между элементами и промежуточным накоплением сообщений на транзитных элементах перед последующей отправкой. Монопольного удержания каналов не требуется, канал больше обозначается как "виртуальный".</li>
<li><strong>Сети с коммутацией пакетов</strong> - сообщения разделяются на определенные "кванты" - пакеты, которые передаются в рамках т.н. "виртуального" канала аналогично п.2, при этом занятие канала связи происходит только на время передачи каждого пакета.</li>
</ol>
<p>Способов разделения и классификации телекоммуникационных сетей можно найти еще достаточно большое количество. О некоторых из них - например, классификация по протоколам и способу организации передачи информационных потоков (коммутации) - можно будет узнать более подробно в дальнейшем.</p>



<h1>3. Протоколы. Определение. 7-уровневая модели OSI и иерархия протоколов</h1>
<p><strong>Протокол(ы)</strong> - это набор семантических и синтаксических правил, определяющих поведение функциональных блоков/элементов сети при осуществлении передачи данных. Иными словами, это совокупность соглашений, определяющих способ представления данных для их передачи в нужных направлениях и правильной интерпретации всеми участниками процесса информационного обмена.</p>
<p>Наиболее активными участниками и разработчиками протоколов можно назвать Международную организацию по стандартизации (ISO), Международный телекоммуникационный союз (ITU), исследовательские центры и комитеты Института инженеров по электротехнике и электронике (IEEE).</p>
<p>Информационный обмен - процесс многофункциональный. Это выражается в подразделении протоколов на различные уровни, каждому из которых отводится определенная родственная группа функций. Для правильного взаимодействия всех элементов сети архитектура протоколов должна быть открытой и доступной всем участникам. Для этих целей служит унификация и стандартизация в области телекоммуникаций и вычислительных сетей.</p>
<p>Наиболее известным иерархически организованным представлением многоуровневой протокольной модели является <strong>7-уровневая базовая эталонная модель взаимосвязи открытых систем</strong>, разработанная и представленная ISO.</p>
<p>Коммуникационные протоколы могут быть реализованы программно, аппаратно, а также комбинацией программных и аппаратных средств. Протоколы нижних уровней чаще всего реализуются в виде комбинации программных и аппаратных средств, тогда как протоколы высоких уровней реализуются программными средствами.</p>
<p>7-уровневая иерархическая модель OSI определяет различные уровни взаимодействия элементов в сети, дает им стандартные имена и указывает на функционал, отвечающий каждому уровню.</p>
<table style="margin-left: auto; margin-right: auto; width: 514px; height: 382px;" border="0">
<tbody>
<tr>
<td>
<p><img src="http://portal.edu.asu.ru/pluginfile.php/21630/mod_lesson/page_contents/3806/7-OSI-common.jpg" alt="7-уровневая модель OSI" style="vertical-align: middle;" height="344" width="504"></p>
</td>
</tr>
<tr>
<td style="text-align: center;">Рис. 1.&nbsp; 7-уровневая модель OSI</td>
</tr>
</tbody>
</table>
<p></p>
<p><strong>1. Физический уровень (physical layer)</strong> - отвечает за передачу битов информации по физическим каналам связи. На этом уровне определяются характеристики электрических сигналов, передающих дискретную информацию (например, крутизна фронта импульсов, уровни напряжения, тип кодирования, скорость передачи и пр.). Сюда же относятся описания типов кабелей и разъемов, назначение контактов в разъемах. Все указанные функции и характеристики стандартизируются для всех устройств, подключаемых к телекоммуникационной сети.</p>
<p><strong>2. Канальный уровень (data link layer)</strong> - обеспечивает и контролирует взаимодействие на физическом уровне, осуществляет группировку передаваемых бит информации в определенные наборы, называемые <strong>кадрами</strong>. Этот уровень проверяет корректность передачи каждого кадра нижележащим уровнем, и в случае необходимости, инициирует повторные посылки информации. Также на этом уровне обеспечивается разграничение доступа к физической среде между отдельными элементами (устройствами), включенными в общую сеть.</p>
<p><strong>3. Сетевой уровень (network layer)</strong> - отвечает за образование единой транспортной системы, объединяющей несколько сетей, служит для определения путей передачи данных. Уровень находится над понятиями конкретных устройств и топологий, оставляя работу со всеми этими моментами более низким уровням. Участники обмена получают собственную адресацию в рамках всей образованной транспортной системы. Сообщения разбиваются на группы определенной структуры, именуемые <strong>"пакетами"</strong>.</p>
<p><strong>4. Транспортный уровень (transport layer)</strong> - обеспечивает сервис и надежность при передаче данных. Уровень отвечает за возможность восстановления прерванной связи, мультиплексирования нескольких соединений, разделение в рамках единого транспорта передаваемых данных множества приложений (протоколов более высокого уровня).</p>
<p><strong>5. Сеансовый уровень (session layer)</strong> - обеспечивает управление диалогом, фиксирует активную в текущий момент сторону обмена, управляет синхронизацией. На практике данный уровень реализуется редко и чаще всего его объединяют с вышележащими уровнями.</p>
<p><strong>6. Представительный уровень (presentation layer)</strong> - имеет дело с формой передаваемой информации, не меняя ее содержания. Данный уровень помогает преодолеть синтаксические различия и несоответствия, осуществить шифрацию и дешифрацию передаваемой информации. Также очень часто этот уровень может быть объединен с вышележащим.</p>
<p><strong>7. Прикладной уровень (application layer)</strong> - это уровень, регламентирующий взаимодействия различных приложений друг с другом и с сетью. Уровень определяет процедуру получения доступа к отдельным ресурсам, описывает совместное взаимодействие и обмен расширенной служебной информацией. <br>На этом уровне реализованы все наиболее популярные на сегодняшний момент протоколы взаимодействия сервисов и служб не только локальных сетей, но и сети Интернет (например, электронная почта, WWW и пр.). Единица информационного обмена на этом уровне - <strong>"сообщение"</strong>.</p>
<p></p>
<p>Протоколы верхнего уровня "упаковываются" в область т.н. "полезной нагрузки" протокола более низкого уровня, а после осуществления передачи процесс осуществляется в обратном порядке. Такая процедура называется <strong>"инкапсуляцией"</strong>.</p>
<p></p>
<p>Три нижних уровня модели являются "сетезависимыми", поскольку тесно связаны с техническими особенностями реализации сети и используемым телекоммуникационным оборудованием.</p>
<p>Три верхних уровня ориентированы на работу приложений и мало зависят от технических особенностей построения сети.</p>
<p id="yui_3_17_2_1_1484754573283_44">Транспортный уровень в данном случае является промежуточным. Его задача заключается в сокрытии деталей функционирования нижних уровней от верхних. Данный подход позволяет разрабатывать приложения, не зависящие от технических средств непосредственной транспортировки сообщений.</p>

<h1>4. Взаимоувязанная сеть связи РФ. Классификация по категориям</h1>
<p>Основой электросвязи Российской Федерации является Взаимоувязанная сеть связи (ВСС), обеспечивающая предоставление пользователям услуг электросвязи на всей территории страны. <br><br>Взаимоувязанная сеть связи - это комплекс технологически сопряжённых сетей электросвязи общего пользования и ведомственных сетей с общим централизованным управлением, независимо от ведомственной принадлежности и форм собственности. <br><br>Взаимоувязанная сеть связи Российской Федерации (ВСС РФ) является частью инфраструктуры страны и представляет собой совокупность сетей, служб и оборудования связи, расположенных и функционирующих на территории страны. Она предназначена для удовлетворения потребностей населения, органов государственной власти и управления, обороны, безопасности, правопорядка, а также пользователей всех категорий в услугах электросвязи.</p>
<p>Вариант классификации сетей связи, входящих в Единую сеть электросвязи (ЕСЭ) РФ представлена на следующем рисунке.</p>
<p><img src="http://portal.edu.asu.ru/pluginfile.php/22194/mod_lesson/page_contents/3987/ESE_RF.jpg" style="vertical-align: middle; display: block; margin-left: auto; margin-right: auto;" height="231" width="448"></p>

<p>В техническом плане функционирование ВСС РФ базируется на принципах и структурах, в соответствии с которыми вся сеть связи страны подразделяется на две взаимосвязанные составляющие: первичную сеть и вторичную сеть.<br><br><strong>Первичная сеть</strong> - это совокупность всех каналов без подразделения их по назначению и видам связи. В состав ее входят линии и каналообразующая аппаратура.<br><br><strong>Вторичная сеть</strong> состоит из каналов одного назначения (телефонных, телеграфных, вещания, передачи данных, телевидения и др.), образуемых на базе первичной сети. Вторичная сеть включает коммутационные узлы, оконечные пункты и каналы, выделенные на первичной сети.<br><br>Помимо принятого разделения сетей ЕСЭ на первичные и вторичные возможно другое двухуровневое разделение, по функциональному назначению: на транспортную сеть и сеть доступа.<br><br><strong>Транспортная сеть</strong> связи состоит из междугородной и зоновых (региональных) сетей связи. <strong>Сеть доступа</strong> (абонентская сеть или сеть абонентского доступа) является местной сетью. Транспортная сеть предназначена для передачи высокоскоростных (широкополосных) потоков сообщения и их накопления.<br><br>Сеть доступа состоит из абонентских линий (на металлических или оптических кабелях или радиоканалах) с подключенными к ним абонентскими оконечными устройствами местных станций коммутаций, соединяющих их линии передачи и линии передачи к узлам транспортной сети. <br><br>По территориальному признаку и назначению первичные и вторичные сети подразделяются на <strong>магистральную</strong> (междугородную - для вторичных сетей), <strong>внутризоновые</strong> (зоновые) и <strong>местные сети</strong>, а также <strong>международные сети</strong>.<br><br><strong>Магистральные сети связи</strong> - технологически сопряженные междугородные сети электросвязи, образуемые между центром Российской Федерации и центрами субъектов Федерации, а также центрами субъектов Федерации между собой.<br><br><strong>Зоновые (региональные) сети связи</strong> - технологически сопряженные сети электросвязи, образуемые в пределах территории одного или нескольких субъектов Федерации.<br><br><strong>Местные сети связи</strong> - технологически сопряженные сети электросвязи, образуемые в пределах административной или определенной по иному принципу территорий, не относящиеся к региональным сетям связи. Местные сети подразделяются на городские и сельские.<br><br>Магистральные, внутризоновые и часть местных цифровых наложенных первичных сетей являются основой транспортной цифровой сети связи России. Местные и первичные сети на участке «местный узел&nbsp; оконечное устройство» в соответствии с новой терминологией являются сетью доступа <br><br></p>
<p><strong>Сеть связи общего пользования(ССОП)</strong> как составная часть взаимосвязанной сети связи РФ включает в себя все сети электросвязи, находящиеся под юрисдикцией РФ(кроме выделенных и ведомственных сетей) и предназначена&nbsp; для&nbsp; предоставления&nbsp; услуг&nbsp; всем&nbsp; физическим&nbsp; и&nbsp; юридическим лицам&nbsp; на&nbsp; территории&nbsp; РФ.&nbsp; Ответственность&nbsp; за&nbsp; ее&nbsp; функционирование&nbsp; и развитие&nbsp; возлагается&nbsp; на&nbsp; федеральные&nbsp; органы исполнительной&nbsp; власти&nbsp; в области связи. </p>
<p><strong>Ведомственные сети связи(ВСС)</strong> создаются и функционируют для обеспечения производственных и социальных нужд федеральных органов исполнительной власти, находятся в их ведении и эксплуатируются ими. Они могут также использоваться для предоставления услуг связи населению и другим пользователям связи. </p>
<p>Выделенные сети связи на территории РФ могут создаваться любыми физическими и юридическими лицами, имеющими признанный правовой статус.</p>
<p><br><strong>Корпоративные сети связи(КСС)</strong> предназначены для обеспечения производственно-хозяйственной&nbsp; деятельности(ПХД)&nbsp; корпораций(организаций, объединений).&nbsp; Корпоративная&nbsp; сеть&nbsp; обеспечивает&nbsp; передачу&nbsp; информации&nbsp; между&nbsp; различными приложениями, используемыми в корпорации. Это инфраструктура корпорации, поддерживающая&nbsp; решение&nbsp; таких&nbsp; задач,&nbsp; как&nbsp; администрирование&nbsp; корпорации&nbsp; и передача управляющих воздействий между объектами управления, передача технологической и телеметрической информации вдоль линейно-протяженных коммуникаций и их техническое обслуживание, социально-культурное обеспечение сотрудников корпораций современными услугами связи и телерадиовещания. КСС, как правило, является территориально-распределенной,&nbsp; объединяющей&nbsp; офисы,&nbsp; подразделения&nbsp; и&nbsp; другие&nbsp; структуры, удаленные друг от друга на значительные расстояния. Она должна быть максимально универсальной, т. е. в ней должна быть заложена возможность интеграции уже существующих и будущих приложений.</p>

<p>В структуры ВСС РФ традиционно входят следующие системы общего пользования:</p>
<ul>
<li>телефонная связь;</li>
<li>телеграфная связь;</li>
<li>факсимильная связь;</li>
<li>передача газетных полос;</li>
<li>передача данных;</li>
<li>распространение программ звукового вещания;</li>
<li>распространение программ телевизионного вещания.</li>
</ul>

<p>В процессе развития возможны интеграция и образование новых</p>
<p>различных служб, в результате чего перечень систем ВСС РФ может</p>
<p>существенно измениться.</p>

<h1>5. Взаимоувязанная сеть связи РФ. Системы документальной электросвязи</h1>
<p>В настоящее время важное место в ВСС занимают <strong>системы </strong><strong>документальной электросвязи (СДЭС)</strong>, которые включают в себя системы телеграфной связи, службы передачи данных и телематические службы. <br><br><strong>Документальной электросвязью</strong> называют вид электрической связи, предназначенной для доставки сообщений, представленных в виде <br>документов. <br><br>Системы документальной электросвязи способны передавать сообщения без искажений, что используется для передачи текстовых документов, и с искажениями, что, в свою очередь, используется для передачи звуковой и графической информации.</p>
<p>Классификация систем документальной электросвязи в рамках ВСС РФ приведена на следующем рисунке.</p>
<p>
	<img style="display: block; margin-left: auto; margin-right: auto;" src="http://portal.edu.asu.ru/pluginfile.php/22194/mod_lesson/page_contents/3988/DSE_RF.jpg" height="451" width="448">
</p>

<p>Рассмотрим подробнее службы, включенные в СДЭС. </p>
<p>1) телеграфная служба - служба доставки сообщений в буквенно-цифровом виде, а также комплекс услуг, предоставляемых населению и предприятиям при использовании системы телеграфной связи; <br>2) служба передачи данных - служба, выполняющая доставку разнородных массивов данных (сообщений) для ЭВМ; <br>3) телематические службы (ТМ) - службы электросвязи, за исключением телефонной, телеграфной служб и службы передачи данных, предназначенные для передачи информации через сети электросвязи. <br><br>Примерами ТМ служб являются: факсимильные службы, службы электронных сообщений, службы голосовых сообщений, службы аудио/видеоконференций, а также службы доступа к информации, хранящейся в электронном виде. <br><br>Телеграфная сеть общего пользования предоставляет населению и предприятиям комплекс услуг по приёму, передаче и доставке адресатам сообщений, поступающих в отделение связи. При поступлении заявки на передачу телеграммы оператор отделения связи по каналам телеграфной связи передает сообщение другому отделению связи, наиболее близко расположенному к адресату. После приёма телеграфного сообщения другим отделением связи телеграмма передаётся адресату службой доставки почты. <br><br>Служба передачи газет предназначена для распространения копий газетных полос между типографиями, расположенными в разных точках РФ, с целью одновременного выхода газет в свет. <br><br>Телематические (от «телекоммуникации» и «информатика») службы предназначены для обмена информацией между различными объектами, машинами и людьми. <br><br>Факсимильная связь - это ТМ служба передачи и воспроизведения любого неподвижного графического изображения.</p>
<p>Электронная почта - ТМ служба, предназначенная для обмена электронными сообщениями с промежуточным накоплением между абонентскими терминалами. <br><br>Службы телеконференций предназначены для проведения сеансов связи между территориально разобщёнными пользователями либо группами пользователей в режиме реального времени с возможностью передачи текстовых, звуковых и видео сообщений. Если между пользователями происходит обмен звуковой информацией, то конференция называется аудиокоференцией, если одновременно со звуком передаётся изображение, то конференция называется видеоконференцией. Одновременно со звуком также может передаваться текстовая информация. <br><br>Службы передачи голоса предназначены для обеспечения территориально разобщённым пользователям возможности обмена речевой информацией в режиме реального времени с использованием ресурсов сетей пакетной передачи данных. <br><br>Служба доступа к информационным ресурсам - вид ТМ службы, предназначенной для получения информационного ресурса пользователем по его инициативе, выраженной в форме запроса, а также предоставления услуг размещения и хранения информационного ресурса, полученного от поставщика (например, службы WWW).</p>

<h1>6. Линии связи. Типы и виды. Особенности</h1>
<p><b>Линия связи</b> – некоторый сегмент, обеспечивающий передачу данных между двумя соседними элементами сети. Если сегмент включает в себя некоторые промежуточные устройства, то обычно говорят о «составном канале» или линии связи.</p>
<p>Линии связи различаются физической средой, используемой для передачи данных, в которой распространяются информационные сигналы. В одном случае это может быть набор проводников (проводные линии связи), или земная атмосфера / космическое пространство (беспроводные линии связи).</p>
<p>Информационные сигналы передаются при помощи электрического тока или напряжения, радиосигналов или световых импульсов. Все эти физические процессы представляют собой колебания электромагнитного поля различной частоты. Информативными при этом являются характеристики электромагнитных колебаний и состояние (присутствие или отсутствие) самого сигнала.</p>
<p><b>Проводные / Кабельные линии связи</b> имеют сложную конструкцию и состоят из проводников, заключенных в несколько слоев изоляции – электрической, электромагнитной, механической – для отделения проводников друг от друга и их защиты от внешних воздействий (рис. 2.1). Кабели могут оборудоваться разъемами для подключения различного оборудования. В компьютерных и телекоммуникационных сетях применяются кабели на основе скрученных пар медных проводников – <b>неэкранированная витая пара</b> (Unshielded Twistet Pair), <b>экранированная витая пара</b> (Shielded Twistet Pair), <b>коаксиальные кабели</b> (состоят из медной жилы и внешней оплетки, отделенной от жилы изоляцией). В настоящее время большую популярность приобрели <b>волоконно-оптические кабели</b>, в которых в качестве проводников используются тонкие оптические волокна-световоды, по которым распространяются световые сигналы.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37597/mod_lesson/page_contents/8511/Pic2_1.jpg" height="303" width="404">
</p>
<p align="center">Рис.2.1. Кабели, применяемые в телекоммуникационных сетях: а) неэкранированная витая пара, б) коаксиальный кабель, в) волоконно-оптический кабель.</p>
<p><b>Беспроводные линии связи</b> – наземные и спутниковые – образуются при помощи передатчиков и приемников радиоволн. Широкое разнообразие беспроводных линий связи объясняется дальностью работы таких линий, используемым частотным диапазоном и технологией организации передачи и приема информационных сигналов. Для беспроводных линий используются длинные, средние, короткие, ультракороткие волны, а также микроволновый диапазон (частоты от 300 МГц и выше). Сигналы с частотами выше 30 МГц не отражаются ионосферой Земли и требуют наличия прямой видимости между передатчиком и приемником (рис. 2.2.).</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37597/mod_lesson/page_contents/8511/Pic2_2.jpg" height="277" width="493"></p>
<p align="center">Рис.2.2. Частотные диапазоны, применяемые в линиях связи.</p>

<p>Любая физическая среда передачи данных в силу природных особенностей или физических закономерностей не является совершенной, а это значит, что информационные сигналы искажаются при передаче по линиям связи – изменяются их характеристики, в том числе и те, которые являются информативными. Например, проводные линии связи обладают неидеальными физическими параметрами – сопротивлением, емкостью, индуктивностью. Могут возникать внешние помехи, которые вносят свой вклад в искажение сигналов, а также внутренние помехи – создаваемые одними проводниками на другие.</p>
<p>Установление взаимосвязи между изменением информативных параметров сигнала и реальной информацией называется <b>физическим</b> <b>кодированием</b>. Количество изменений информативного параметра сигнала в секунду измеряют в бодах.</p>

<h1>7. Характеристики линий связи. Связь между характеристиками линии и спектром передаваемого сигнала</h1>

<p>В соответствии с теорией гармонического анализа, любой периодический процесс (колебания) можно представить в виде суммы синусоидальных колебаний различных частот и различных амплитуд. Такое представление называют разложением в <b>ряд Фурье</b>, где каждая составляющая синусоида называется <b>гармоникой</b>, а набор всех гармоник – <b>спектральным разложением</b> или <b>спектром</b> исходного сигнала. Разность между максимальной и минимальной частотами такого набора синусоид называется <b>шириной спектра</b> сигнала. Непериодические сигналы можно представить в виде интеграла синусоидальных сигналов и, соответственно, непрерывным спектром частот. Разложение в ряд Фурье обратимо, т.е. можно восстановить исходный сигнал, зная его спектр и выполнив обратное преобразование.</p>
<p>Характеристики линии связи чаще всего определяются путем анализа ее реакции на некоторые эталонные воздействия, в качестве которых используются синусоидальные колебания различных частот. Степень искажения синусоидальных колебаний оценивается следующими характеристиками:</p>
<p>1. <b>Затухание</b> – относительное уменьшение амплитуды или мощности эталонного сигнала определенной частоты на выходе в сравнении с амплитудой или мощностью на входе. Затухание A зависит от типа линии и ее протяженности, измеряется в децибелах (дБ, dB) и определяется по следующей формуле:</p>

<p style="text-align: center;"><i>A</i><i> = 10 </i><i>log</i><i> </i><i><sub>10</sub></i><i> (</i><i>P</i><i><sub>вых</sub></i><i> / </i><i>P</i><i><sub>вх</sub></i><i> )</i>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2.1)</p>
<p>где <i>P</i><i><sub>вых</sub></i><i> , </i><i>P</i><i><sub>вх</sub></i> – мощность сигнала на выходе и входе соответственно.&nbsp;&nbsp;</p>
<p></p>
<p>2. <b>Полоса пропускания</b> – непрерывный диапазон частот, в котором отношение мощности или амплитуды входного и выходного сигнала превышает некоторый заданный заранее предел (обычно 0.5). Полоса пропускания зависит от типа линии и ее протяженности.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37597/mod_lesson/page_contents/8518/Pic2_3.jpg" height="214" width="346">
</p>
<p align="center">Рис.2.3. Полоса пропускания.</p>
<p>При описании параметров линий связи часто приводят затухание для нескольких значений частот. Кроме этого, часто на практике заранее известна частота передаваемого сигнала – т.е. гармоника с наибольшей амплитудой и мощностью. Этого достаточно для приблизительной оценки искажения передаваемых по линии сигналов.</p>
<p>3. <b>Амплитудно-частотная характеристика (АЧХ)</b> – дает наиболее полное представление о линии связи, показывает затухание амплитуды синусоиды на выходе по сравнению с амплитудой на входе для всех возможных частот передаваемого сигнала.</p>
<p>4. <b>Помехоустойчивость</b> – определяет способность линии противостоять воздействию внешних и внутренних помех. Зависит от типа используемой физической среды, способа экранирования и пр.</p>
<p>5. <b>Активное сопротивление</b> – сопротивление медной линии связи по постоянному току (в Омах). Пропорционально длине и обратно пропорционально сечению.</p>
<p>6. <b>Волновое сопротивление</b> – параметр медной линии связи, представляющий полное сопротивление, которое встречает электромагнитная волна определенной частоты при распространении вдоль однородной цепи. Измеряется в Омах, зависит от активного сопротивления, частоты передаваемого сигнала, индуктивности и емкости линии связи.</p>
<p>7. <b>Перекрестные наводки на ближнем конце</b> (Near End Cross Talk, NEXT) – характеризует кабель в случае, когда наводка генерируется сигналом, передаваемым от передатчика по одной паре,&nbsp; и регистрируется на другой паре, к которой подключен приемник на том же конце кабеля, что и передатчик.&nbsp; Показатель измеряется в дБ и определяется по формуле, аналогичной (2.1) с соответствующими изменениями.</p>
<p>8. <b>Достоверность передачи данных</b> – вероятность искажения каждого бита (единицы информации) передаваемых данных. Выражается в степени (отрицательной) вероятности возникновения искажения на каждый переданный бит информации. Так, величина 10<sup>-6</sup> свидетельствует о том, что среди 10<sup>6</sup> переданных бит информации возможно искажение 1 бита.</p>

<h3>Пропускная способность линии связи</h3>
<p><b>Пропускная способность</b> – характеристика, определяющая максимальную возможную скорость передачи данных (единиц информации) по линии, измеряется в битах в секунду (бит/с). С одной стороны, пропускная способность зависит от характеристик физической среды / линии связи и напрямую связана с затуханием и полосой пропускания, а с другой стороны она также определяется способом организации передачи данных в линии связи и спектра передаваемых сигналов. Если значимые гармоники спектра передаваемого сигнала (гармоники, амплитуды которых вносят основной вклад в результирующий сигнал) попадают в полосу пропускания линии связи, то это будет обеспечивать минимальные искажения передаваемому сигналу. Если значимые гармоники оказываются за пределами полосы пропускания, то сигнал при передаче терпит существенные искажения (рис. 2.4).</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37597/mod_lesson/page_contents/8525/Pic2_4.jpg" height="318" width="495">
</p>
<p align="center">Рис.2.4. Связь между полосой пропускания и спектром передаваемого сигнала: а) спектр сигнала попадает в полосу пропускания, б) спектр сигнала шире полосы пропускания, наличие искажений.</p>
<p>&nbsp;</p>
<p>Между полосой пропускания и пропускной способностью существуют и более формальные соотношения. Так, связь между полосой пропускания линии и ее пропускной способностью вне зависимости от способа физического кодирования установлена К. Шенноном следующим образом:</p>
<p style="text-align: center;">&nbsp;<i></i><i>C</i><i> = </i><i>F</i><i> </i><i>log</i><i><sub>2</sub></i><i> (1 + </i><i>P<sub>s</sub></i><i> / </i><i>P<sub>n</sub></i><i> )</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2.2)</p>
<p>где <i>С</i> – пропускная способность линии в бит/с, <i>F</i> – ширина полосы пропускания линии в Гц, <i>P<sub>s</sub></i><i> </i>– мощность сигнала,<i> </i><i>P<sub>n</sub></i><i> </i>– мощность шума.&nbsp;&nbsp;</p>
<p>На практике большее распространение получило соотношение Найквиста для максимально возможной пропускной способности линии без учета шума:</p>
<p style="text-align: center;"><i></i><i>C</i><i> = 2</i><i>F</i><i> </i><i>log</i><i><sub>2</sub></i><i> </i><i>M</i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2.3)</p>
<p>где <i>С</i> – пропускная способность линии в бит/с, <i>F</i> – ширина полосы пропускания линии в Гц, <i>M</i><i> </i>– количество различных состояний информативного параметра.&nbsp;&nbsp;</p>

<h1>8. Передача данных на физическом уровне. Дискретная модуляция аналоговых сигналов. Кодирование и виды кодов</h1>
<p>Как уже отмечалось ранее, для информационного сигнала способность нести информацию может быть «заложена» в характеристиках электромагнитных колебаний или состоянии (присутствие или отсутствие) самого сигнала. Соответственно, для сигнала как колебательного процесса можно отметить следующие варианты изменения информативных параметров (Рис.2.5):</p>
<p>а) изменение состояния сигнала – наиболее близко соответствует <b>дискретному представлению</b> информации в виде двоичных нулей и единиц. Этот подход позволяет наиболее близко подойти к способу хранения и обработки данных в современной компьютерной технике и не требует сложных аппаратных схемотехнических решений для выделения информативных параметров из передаваемого сигнала. Однако, такое дискретное представление выражается в увеличении ширины спектра сигнала при увеличении его частоты (т.е. скорости изменения информативного параметра и, соответственно, скорости передачи). Так, идеальный импульс единичной мощности и нулевой длительности имеет бесконечную ширину своего спектра.</p>
<p>б) изменение амплитуды сигнала – <b>амплитудная модуляция</b> – амплитуду высокочастотного сигнала изменяют (модулируют) в соответствии с изменением низкочастотного сигнала. Например, большой уровень амплитуды соответствует двоичной единице, а малый – нулю.</p>
<p>в) изменение частоты сигнала – <b>частотная модуляция</b>.</p>
<p>г) изменение фазы сигнала – <b>фазовая модуляция</b>.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37599/mod_lesson/page_contents/8528/Pic2_5.jpg" height="266" width="481">
</p>
<p align="center">Рис.2.5. Варианты изменения информативных параметров передаваемого сигнала: а) дискретное представление, б) амплитудная модуляция, в) частотная модуляция, г) фазовая модуляция.</p>
<p>&nbsp;</p>
<p>Возможно не только представление дискретных состояний (двоичные ноль и единица) аналоговыми способами&nbsp; при помощи модуляции, но и обратный вариант – представление аналогового сигнала и передача аналоговой информации в дискретной форме. Этот процесс называется <b>дискретизацией</b> и позволяет работать с аналоговыми сигналами на современной компьютерной технике с дискретным представлением информации.</p>
<p>Процесс дискретизации осуществляется устройством – <b>аналогово-цифровым преобразователем (АЦП)</b> - следующим образом (Рис. 2.6).</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37599/mod_lesson/page_contents/8528/Pic2_6.jpg" height="272" width="462">
</p>
<p align="center">Рис.2.6. Дискретизация аналогового сигнала.</p>
<p>Амплитуда исходной непрерывной функции измеряется с заданным периодом по времени (шагом) – дискретизация по времени.</p>
<p>Каждый замер представляется в виде двоичного числа определенного значения – дискретизация по значениям.</p>
<p>Процесс дискретизации основывается на теории отображения Найквиста и <b>теореме Найквиста – Котельникова</b>, согласно которой любая аналоговая непрерывная функция может быть передана в виде дискретных по времени значений и точно восстановлена обратно в том случае, если частота дискретизации в два или более раза выше частоты самой высокой гармоники спектра ее исходной функции.</p>
<p>Наиболее популярный пример для демонстрации процесса дискретизации, применяемого в связи – это метод <b>импульсно-кодовой модуляции</b> (ИКМ, pulse-code modulation, PCM), широко применяемый в сетях цифровой телефонной связи для передачи голоса. Изначально, в сетях аналоговой телефонии для передачи голоса был выбран диапазон от 300 Гц до 3400 Гц. Тогда, в соответствии с теоремой Найквиста-Котельникова, необходимо использовать частоту дискретизации, равную <i>6800 </i>Гц<i> = 2 х 3400 </i>Гц. &nbsp;На практике для обеспечения некоторого запаса качества верхний потолок поднимают до 8000 Гц, что выражается в необходимости проводить 8000 дискретных измерений сигнала в секунду. При дискретизации по значениям используют 7 и 8-битные представления амплитуды одного замера, что в итоге образует некоторый поток битов информации, для пропуска которого необходимо <i>7 х 8000 = 56</i> Кбит/с или <i>8 х 8000 = 64 </i>Кбит/с. Такой канал в телефонии называют элементарным или базовым каналом (BRI) цифровых телефонных сетей. В Европе и России такой канал равен 64 Кбит/с, а в США и Канаде – 56 Кбит/с.</p>

<p>Наиболее простым и оптимальным способом для передачи дискретной информации является использование прямоугольных импульсов. При этом необходимо помнить о том, что приемник и передатчик должны иметь возможность определять и различать каждые новые ноль и единицу, а спектр сигнала должен стремиться к минимально возможному, поскольку более узкий спектр на линиях с одной и той же полосой пропускания позволяет получать более высокие скорости передачи информации. Для различения передаваемых последовательностей нолей и единиц применяют <b>синхронизацию</b> – разбиение времени на такты определенной длительности, в течение которого передается каждый бит (рис. 2.7). Это можно осуществить использованием дополнительной линии, по которой будут передаваться тактовые / синхронизирующие импульсы.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37599/mod_lesson/page_contents/8529/Pic2_7.jpg" height="132" width="437">
</p>
<p align="center">Рис. 2.7. Синхронизация приемника и передатчика.</p>
<p>В целях экономии проводников проблема синхронизации может решаться и при помощи <b>самосинхронизирующихся кодов</b>. В этом случае перепад сигнала является сигналом для распознавания очередного бита, особенно в случае передачи двух одинаковых бит сигнала подряд.</p>
<p>Наиболее распространенными являются следующие самосинхронизирующиеся коды (рис. 2.8):</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37599/mod_lesson/page_contents/8529/Pic2_8.jpg" height="356" width="398">
</p>
<p align="center">Рис.2.8. Самосинхронизирующиеся коды: а) NRZ-код, б) RZ-код, в) Манчестерский код, г) AMI-код.</p>
<p>а) код без возврата к нулю (NRZ-код) – простое кодирование и низкая стоимость реализации. Сигнал при передаче одноименных нулей и единиц своего состояния не изменяет, что требует от приемника и передатчика всецело полагаться на свои собственные таймеры. По сути, код самосинхронизирующимся не является.</p>
<p>б) код с возвратом к нулю (RZ-код) – за время передачи одного бита уровень сигнала меняется дважды, единица представлена уровнем одной полярности, ноль – другой. Каждый импульс длится половину такта. Код обладает отличными самосинхронизирующимися характеристиками, но также и очень широким спектром, что усложняет его реализацию.</p>
<p>в) манчестерский код – обеспечивает изменение уровня сигнала при передаче каждого бита, и двойное изменение при передаче одноименных битов. Информация кодируется перепадами потенциала в середине каждого такта, при этом используются только два уровня сигнала. Этот код широко применяется в современных сетях Ethernet.</p>
<p>г) биполярный код с очередной инверсией уровня (AMI-код) – использует три уровня потенциала, при этом единица кодируется либо положительным, либо отрицательным потенциалом, при этом передача каждой новой единицы отличается знаком потенциала.</p>


<h1>9. Технология частотного/спектрального мультиплексирования при передаче данных по линиям связи</h1>
<p>Современные линии связи обладают достаточно хорошими характеристиками и широкой полосой пропускания. В то же время, оптимальное кодирование позволяет получать сигналы с достаточно узким спектром, и резонно возникает вопрос об оптимальности использования линии связи для передачи сигналов и экономии ресурсов. Физически не всегда возможно увеличить количество проводников в кабелях связи или проложить еще один кабель рядом. Поэтому были разработаны технологии, позволяющие использовать линии связи для передачи по ним нескольких информационных сигналов одновременно. Такое «уплотнение» линий связи при передаче по ним информационных сигналов называют <b>мультиплексированием </b>сигналов.</p>

<p><b>Частотное</b><b> </b><b>мультиплексирование</b><b> (Frequency Division Multiplexing, FDM).</b></p>

<p>Идея частотного мультиплексирования была взята из эфирного способа распространения радиосигнала с амплитудной или частотной модуляцией. В этом случае в общей полосе пропускания выделяется свой собственный диапазон частот для работы каждого соединения, как в радиоэфире каждая станция имеет свою частоту вещания и не мешает при этом другим радиостанциям.</p>
<p>При частотном мультиплексировании каждому сигналу отводится свой собственный диапазон (полоса) частот. Для этого исходный сигнал преобразовывают за счет модуляции несущей частоты таким образом, чтобы он занимал именно ему выделенную полосу частот. После этого сигналы можно суммировать и отправлять в линию связи, поскольку каждый из них сдвинут в свою область спектра и находится от другого сигнала на некотором интервале, чтобы не допускать пересечения (рис. 2.9). На другом конце линии связи происходит обратный процесс.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37600/mod_lesson/page_contents/8530/Pic2_9.jpg" height="277" width="478">
</p>
<p align="center">Рис. 2.9. Принцип частотного мультиплексирования.</p>
<p>&nbsp;</p>
<p>Традиционно, первыми сетями связи, где была применена подобная технология, были сети аналоговой телефонной связи. В настоящее время частотное мультиплексирование применяется также на абонентских линиях телефонной связи для обеспечения одновременной работы обычного телефона и дополнительной услуги, такой как охранная сигнализация или высокоскоростная передача данных (ADSL). Мультиплексирование на двух сторонах линии связи осуществляется при помощи сплиттеров, являющихся пассивными фильтрами низких и высоких частот для предотвращения взаимного влияния низкочастотного (телефонного) и высокочастотного (передача данных) сигналов друг на друга.</p>
<p><b>Спектральное мультиплексирование (</b><b>Wavelength</b><b> </b><b>Division</b><b> </b><b>Multiplexing</b><b>, </b><b>WDM</b><b>)</b> – по сути является тем же вариантом частотного уплотнения, с разницей лишь в терминологии. Данная технология применяется на оптоволоконных линиях связи, где имеют дело не с частотами, а с длинами оптических волн. Принцип работы при этом аналогичен рассмотренному ранее частотному уплотнению – сигналы с разными длинами волн объединяются сплиттером / сумматором так, чтобы попасть в одно оптическое волокно. На другом конце такой же сплиттер / разветвитель выполняет функцию выделения нужной длины волны из общего потока (рис. 2.10).</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37600/mod_lesson/page_contents/8531/Pic2_10.jpg" height="259" width="511">
</p>
<p align="center">Рис. 2.10. Принцип спектрального мультиплексирования.</p>
<p>Для работы используются волны длиной от 850 нм до 1650 нм. В одном магистральном канале мультиплексируется от 2 до 16 разных длин волн (каналов). В этом случае мультиплексирование можно проводить при помощи простых в производстве и относительно недорогих призм-сплиттеров, которые выполняют т.н. «грубое» мультиплексирование. Это дало названию технологии и классу устройств «грубого» спектрального мультиплексирования – Coarse Wavelength Division Multiplexing (CWDM). При увеличении числа каналов больше 16 системы усложняются и образуют свой собственный класс устройств и технологию «плотного» мультиплексирования – Dense Wavelength Division Multiplexing (DWDM).</p>

<h1>10. Технология мультиплексирования с разделением времени. Поток Е1</h1>

<p><b>Мультиплексирование с разделением по времени (</b><b>Time</b><b> </b><b>Division</b><b> </b><b>Multiplexing</b><b>)</b>.</p>
<p>Принцип временного мультиплексирования заключается в предоставлении линии или канала связи каждому соединению на определенный период времени. Данная технология наиболее эффективна при работе с дискретной информацией и соответствующим кодированием. При этом для обеспечения мультиплексирования с разделением времени необходимы дополнительные цифровые устройства, которые будут осуществлять синхронизацию и доступ к линии связи для каждого соединения строго определенный момент времени. Впервые применение данной технологии было реализовано в сетях цифровой телефонии, что объясняет современные стандарты и принципы работы устройств TDM-мультиплексирования.</p>
<p>Напомним, что для передачи цифрового голосового потока в сетях телефонии используется канал пропускной способностью 64 Кбит/с, что означает передачу 8000 байт за 1 секунду, или же требует 125 мкс времени для передачи каждого байта. Т.е. если на одном конце каждый байт будет отправляться 125 мкс, а на другом – каждые 125 мкс получаться, то соединение будет работать и обеспечивать требуемые 64 Кбит/с. Но поскольку такая пропускная способность может не привести к полной утилизации полосы пропускания, то логично предполагать, что данные можно передавать и быстрее. В зависимости от скорости передачи, требуемое для передачи каждого байта время будет все больше сокращаться, оставляя вакантные промежутки времени лишь для того, чтобы не нарушать принятые нами изначально условия на передачу голосовой информации – 125 мкс на каждый байт и 64 Кбит/с в итоге. Условно, процесс можно изобразить следующим образом (рис. 2.11).</p>
<p style="text-align: center;">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37600/mod_lesson/page_contents/8532/Pic2_11.jpg" height="132" width="622">
</p>
<p style="text-align: center;">Рис. 2.11. Сокращение времени на передачу одного байта при увеличении скорости.</p>
<p>Так, если для скорости 64 Кбит/с передача одного байта занимает 125 мкс, то на скорости 256 Кбит/с один байт можно передать в 4 раза быстрее, при этом 3/4 оставшегося времени в линии ничего не передается. На этом принципе и основывается TDM-мультиплексирование, когда свободное время, образовавшееся путем увеличения скорости передачи в линии связи, при помощи специализированного оборудования занимается данными из других соединений.</p>
<p>Каждый цикл работы, обслуживающий одно соединение, называется <b>тайм-слотом</b>. Длительность тайм-слота зависит от числа каналов/соединений, обслуживаемых TDM-оборудованием, и скорости передачи в линии связи. TDM-оборудование обычно называют <b>мультиплексорами</b>. Задача мультиплексора с одной стороны линии связи – распределить данные из нескольких соединений в свои тайм-слоты и передать всю последовательность в линию связи. Задача мультиплексора на другой стороне – разобрать принятую последовательность и распределить данные в соответствующие соединения. Работа такой технологии жестко зависит от количества и порядка следования последовательности тайм-слотов при передаче в линию связи (иначе невозможно будет понять, в каком тайм-слоте находятся данные для конкретного соединения), и жесткая синхронизация при передаче каждой последовательности тайм-слотов для определения количества и порядка при передаче и приеме.</p>


<h3>Режимы передачи информации</h3>
<p>При использовании линий и каналов связи между передатчиками и приемниками рассматривают несколько режимов работы при передаче информации:</p>
<p>а) симплексный режим&nbsp; - передатчик одной стороны и приемник другой стороны связаны одним каналом связи, по которому передача информации осуществляется строго в одном направлении.</p>
<p>б) полудуплексный режим - передатчик и приемник каждой стороны связаны одним каналом связи, который попеременно используется как для передачи, так и для приема информации.</p>
<p>в) дуплексный режим – подразумевает одновременную передачу информации между двумя сторонами. Самый простой способ организации дуплексного режима – использование двух линий связи для соединения соответствующих передатчиков и приемников сторон. Современные технологии позволяют использовать режимы FDM и TDM мультиплексирования для организации дуплексных режимов работы на одной линии связи.</p>

<h2>1. Коммутация каналов</h2>
<h3>Принципы технологии коммутации каналов</h3>
<p>Технология коммутации каналов является самой первой технологией построения линии / канала связи, состоящего из нескольких звеньев. Исторически эта технология появилась и была отработана в период становления и развития аналоговой телефонной связи, когда необходимо было решать эффективным образом процесс информационного обмена между большим количеством абонентов и ограниченным ресурсом в виде линий связи. Соединение двух абонентов между собой и образование между ними прямого канала на период осуществления соединения и обмена информацией осуществлялся при помощи оператора-человека, но даже последующая автоматизация этого процесса не смогла изменить базовые принципы работы этой технологии, ее достоинства и ограничения.</p>
<p>Одна из особенностей технологии коммутации каналов и сетей, построенных на этом принципе – понятие <b>элементарного канала</b> – базовая технологическая характеристика сети, представляющее собой некоторое фиксированное в пределах сетей данного типа значение пропускной способности. Любая линия связи в сети с коммутацией каналов имеет пропускную способность, кратную этой характеристике элементарного канала.</p>
<p>Например, для кабельных сетей аналоговой телефонии такая характеристика могла иметь название «пара» или «линия связи» - количество таких линий в кабеле определяет количество одновременных телефонных разговоров (пропускную способность) линии связи, выполненной таким кабелем.</p>
<p>Связь, построенную путем соединения (коммутации) элементарных каналов называют <b>составным каналом</b>. Соединение каналов осуществляется в пунктах коммутации, при этом между абонентом А и В возникает цельный канал, по которому может осуществляться передача информации (рис. 3.1).&nbsp; Такая связь может быть временной или постоянной, в зависимости от того, каким образом функционируют пункты коммутации S на сети. Получившийся канал при этом имеет одинаковое количество элементарных каналов (в нашем примере задействовано 2 элементарных канала), постоянную и фиксированную пропускную способность на всем своем протяжении. Все данные, поступившие в образованный канал от одного абонента доставляются другому <b>без задержек, потерь, с той же скоростью</b> вне зависимости от того, существуют ли в это же время в сети другие соединения. Абоненты при этом могут осуществлять обмен данными со скоростью, не превышающей пропускную способность составного канала.</p>
<p>Если пункты коммутации являются интеллектуальными, то процессом образования составного канала можно управлять, как это происходит, например, в сети телефонной связи при организации соединения – наборе номера и вызова абонента. Тогда составной канал может возникать на некоторое время, требующееся для обмена информацией, и после исчезать. Также возможна ситуация, когда составной канал образуется на длительный промежуток времени (на постоянной основе).</p>
<p>Если какой-то участок сети с коммутацией каналов исчерпал свою возможность предоставить еще не занятые элементарные каналы, то составной канал не образуется до тех пор, пока такая возможность на сети не появится. В этом случае абоненты либо вынуждены конкурировать за ресурсы подобной сети, либо сеть изначально строится с учетом требований всех работающих на ней абонентов.</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37602/mod_lesson/page_contents/8534/Pic3_1.jpg" height="349" width="454">
</p>
<p align="center">Рис. 3.1. Образование составного канала между абонентом А и В на сети с коммутацией каналов.</p>
<p>Также следует обратить внимание на то, что составной канал поддерживается в активном / рабочем состоянии на весь период соединения, занимая при этом необходимый ресурс сети. Если при этом по составному каналу не было передано ни единого бита информации, канал все равно сохраняется на случай, когда возникнет такая необходимость в передаче информации. С одной стороны – это неоспоримое достоинство сети, а с другой стороны – эффективность работы такой сети снижается, когда информационные потоки между абонентами приобретают пульсирующий характер. Это наиболее ярко проявляется при передаче компьютерного трафика – информации, генерируемой компьютерными приложениями. Передав нужный объем информации, канал простаивает, пока не возникнет следующая потребность в осуществлении передачи. Для передачи телефонных разговоров такое считается приемлемым, и традиционная цифровая телефония целиком и полностью построена на сетях, работающих по принципу коммутации каналов.</p>


<h1>11. Мультиплексирование потоков Е1. Построение сети PDH. Синхронные каналы SDH/SONET</h1>
<p>Использование TDM-мультиплексирования в сетях цифровой телефонии и необходимость жесткого регламентирования и соблюдения последовательности действий всеми сторонами, поддерживающими данную технологию, привело к образованию некоторых стандартов и наименований, широко употребляемых в современной телекоммуникации.</p>
<p>Американский стандарт подразумевает TDM-мультиплексирование с использованием 24 тайм-слотов, что образует один кадр, передающийся за 125 мкс. Дополнительно перед самым первым тайм-слотом вводится 1 бит синхронизации, что дает 193 бит и общую скорость 1544 Кбит/с. Такой канал называют «канал Т1» или «поток Т1».</p>
<p>Европейский стандарт (он же применяется и в России) ориентирован на использование 32 тайм-слотов, которые образуют 1 кадр (256 бит), передающийся за 125 мкс. Вопрос синхронизации при этом решается отдельным образом. Скорость такого канала – 2048 Кбит/с, такой канал называют «канал Е1» или «поток Е1» (рис. 3.2).</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37603/mod_lesson/page_contents/8535/Pic3_2.jpg" height="264" width="365"></p>
<p align="center">Рис. 3.2. Структура каналов Т1 (1544 Кбит/с) и Е1 (2048 Кбит/с).</p>


<h3>Построение сети PDH</h3>
<p>Традиционные сети цифровой телефонии, использующие каналы с TDM-мультиплексированием, являются наиболее яркими представителями сетей с технологией коммутации каналов. Руководствуясь принципами TDM-мультиплексирования и принятыми стандартами, на базе TDM-мультиплексоров можно развертывать сложные сетевые конфигурации и решать все поставленные задачи. В самом простом случае элементарным каналом является канал 64 Кбит/с, занимающий один тайм-слот в канале Е1. Учитывая тот факт, что канал Е1 состоит из 32 тайм-слотов, то соединения, выполненные каналами Е1 обладают емкостью в 32 тайм-слота и могут транспортировать 32 независимых канала одновременно.</p>
<p>
	<img style="display: block; margin-left: auto; margin-right: auto;" src="http://portal.edu.asu.ru/pluginfile.php/37603/mod_lesson/page_contents/8536/Pic3_3.jpg" height="288" width="614">
</p>
<p style="text-align: center;">Рис.3.3. Сеть с коммутацией каналов на базе TDM-мультиплексоров.</p>
<p>Конфигурация сети приведена на рис. 3.3. TDM-мультиплексоры MX1, МХ2 и МХ3 выполняют роль пунктов коммутации, организуя составные каналы между различными пунктами. Для организации составных каналов используются тайм-слоты канала Е1, соединяющего все мультиплексоры между собой. При этом образование составного канала нужной пропускной способности происходит кратно пропускной способности элементарного канала. Задача мультиплексора МХ1 заключается в размещении данных своих абонентских портов А1, В1 и С1 в тайм-слоты с определенными, заранее оговоренными на данной сети номерами. Эта договоренность позволит проделать аналогичную операцию на мультиплексорах МХ2 и МХ3, где данные будут извлечены в соответствующие абонентские порты А2, В2 и С2. При этом, если вдруг на участке МХ2 – МХ3 в канале Е1 будут заняты (чем-нибудь другим) оговоренные тайм-слоты TS1-TS4, то организовать канал А1 - А2 будет невозможно.</p>
<p>Возможности сети на базе TDM-мультиплексоров можно расширить, если ввести мультиплексирующее оборудование, работающее с каналами Т1/Е1 аналогичным образом. Для этого используется идея образования каналов с иерархией скорости: <b>4 х Т1 = Т2 (6&nbsp;312 Кбит/с)</b>;<b> 7 х Т2 = Т3 (44&nbsp;736 Кбит/с)</b>; <b>6 х Т3 = Т4 (274 Мбит/с)</b>, или в соответствии с европейским стандартом – <b>4 х Е1 = Е2 (8&nbsp;488 Кбит/с)</b>; <b>4 х Е2 = Е3 (34&nbsp;368 Кбит/с)</b>; <b>4 х Е3 = Е4 (139 Мбит/с)</b>.</p>
<p>Такой принцип иерархичности позволяет эффективно наращивать пропускную способность сети, сохраняя при этом общие принципы ее функционирования. Для каждого последующего уровня иерархии предыдущий уровень является элементарным каналом. Построенные на подобном принципе сети называются <b>плезиохронной цифровой иерархией</b> (<b>PDH</b><b>-сети</b>). Недостатком таких сетей является то, что для доступа к элементарному каналу более низкого уровня требуется неукоснительно соблюдать этот принцип иерархичности и использовать соответствующее для этого оборудование (рис. 3.4). &nbsp;Еще одним недостатком является также достаточно низкая скорость передачи данных (по современным меркам).</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37603/mod_lesson/page_contents/8536/Pic3_4.jpg" height="349" width="500">
</p>
<p align="center">Рис. 3.4. Вывод канала 64 Кбит/с в рамках сети PDH.</p>

<h3>Принципы организации SDH-сетей</h3>
<p>Более гибкий подход и гораздо большие скорости применяются в современных сетях <b>синхронной цифровой иерархии</b> (<b>SDH</b><b>-сети</b>). Мультиплексирование ввода-вывода осуществляется на основе т.н. «виртуальных контейнеров» (VC) разной размерности: VC-12 (2 Мбит/с), VC-11 (1,5 Мбит/с), VC-2 (6 Мбит/с), VC-3 (34/45 Мбит/с), VC-4 (140 Мбит/с), формируя при этом административные блоки (AU/TU) и группы (AUG/TUG). Схематичный процесс мультиплексирования можно представить следующим образом (рис. 3.5):</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37603/mod_lesson/page_contents/8537/Pic3_5.jpg" height="235" width="505">
</p>
<p align="center">Рис. 3.5. Схема мультиплексирования данных в SDH-сети.</p>
<p>Кадр SDH-сети именуется «синхронный транспортный модуль уровня N» (STM-N): STM-1 (155, 520 Мбит/с), STM-4 (622,080 Мбит/с), STM-16 (2, 488 Гбит/с), и т.п. В соответствии со схемой наполнения кадра, в одном STM-1 можно реализовать 1 поток Е4, 63 потока Е1, 1 поток Е3 и 42 потока Е1 и пр.</p>
<p>Мультиплексоры SDH соединяются друг с другом, образуя различные топологии. «Кольцо» обеспечивает надежность работы и гарантирует защиту от обрывов линий связи между мультиплексорами. Это наиболее популярная топология соединения. «Ячеистая» топология позволяет добиться наибольшей надежности и производительности.</p>

<h1>14. Технология пакетной передачи данных. Сеть Ethernet. Формат кадра и адресация в сети Ethernet. Стандарты сети Ethernet</h1>
<h3>Технология коммутации пакетов</h3>
<p>Для преодоления недостатков сетей с коммутацией каналов применяют иную технологию транспортирования информации – <b>пакетную технологию</b> и <b>сети с коммутацией пакетов</b>. Под <b>пакетом</b> понимают способ представления информации в виде структурно отделенных друг от друга порций данных. Каждый пакет снабжается специальной служебной информацией – <b>заголовком</b>, что является необходимым элементом – каждый пакет обрабатывается оборудованием отдельно и независимо от другого пакета. Эта информация позволяет разделять пакеты друг от друга и совершать действия по определению дальнейшей судьбы каждого пакета при его обработке на сети оборудованием коммутации. В конце пакета может располагаться <b>концевик</b>, где содержится проверочная информация (контрольная сумма), позволяющая убедиться в сохранности и целостности полученного пакета.</p>
<p>Пакеты поступают в сеть без предварительного резервирования каналов, ровно с той скоростью, с которой их генерирует источник. При этом исходят из предположения, что сеть всегда готова принять пакет от конечного абонента. Направление продвижения пакета всецело зависит от той служебной информации, которая располагается в его заголовке, и от того, каким образом оборудование коммутации такой сети настроено на обработку пакетов (рис. 3.6).</p>
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37605/mod_lesson/page_contents/8538/Pic3_6.jpg" height="337" width="400">
</p>
<p align="center">Рис. 3.6. Работа сети с коммутацией пакетов.</p>

<p>&nbsp;Принадлежащие разным информационным потокам пакеты могут перемешиваться на сети при транспортировании, образовывать очереди. Не исключено, что может измениться и порядок следования пакетов. При этом снимаются ограничения на скорости каналов связи, соединяющие узлы коммутации между собой. Такая технология лучше подходит для передачи пульсирующего трафика, создаваемого компьютерными приложениями. Неопределенность и асинхронность движения пакетов предъявляет особые требования к оборудованию, участвующему в процессе коммутации пакетов.</p>
<p>На случай возникновения задержек и образования очередей, оборудование должно иметь буферную память для временного хранения пакетов. Буферная память также используется для согласования скоростей передачи при использовании на сети каналов связи с различной пропускной способностью. Из-за ограниченной буферной памяти возможно наступление момента ее переполнения, что приведет к потере передаваемого пакета, что для подобных сетей является обычным явлением.</p>
<p>Необходимость обработки служебной информации заголовков пакетов требует от оборудования наличия вычислительных мощностей – процессора, который будет осуществлять процесс коммутации в соответствии результатом обработки заголовка пакета.</p>


<h3>Эффективность сетей с технологией коммутации пакетов</h3>
<p>В сравнении с технологией коммутации каналов, при равной пропускной способности каналов связи эффективность сетей с коммутацией пакетов гораздо выше. Это было доказано в 60-е годы ХХ века как экспериментально, так и аналитически с помощью теории массового обслуживания. Поэтому на сегодняшний момент наибольшей популярностью пользуются именно сети с технологией коммутации пакетов.</p>
<p>Для примера можно рассмотреть следующую схему (рис. 3.7):</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37605/mod_lesson/page_contents/8539/Pic3_7.jpg" height="81" width="455"></p>
<p align="center">Рис.3.7. Пример для сравнения эффективности технологий.</p>

<p>В случае, если на рис.3.7 представлена сеть с коммутацией каналов, и с каждой стороны работает 10 абонентов, то для каждого абонента при наличии пиковой нагрузки в 10 Мбит/с и средней нагрузки в 1 Мбит/с будет доступен канал пропускной способностью 10 Мбит/с (пиковая нагрузка!), и общая пропускная способность сети на этом будет исчерпана, любой последующий абонент получит отказ в обслуживании.</p>
<p>В случае, когда рис. 3.7 представляет сеть с коммутацией пакетов, то для средней нагрузки в 1 Мбит/с возможно организовать передачу 100 информационных потоков! Т.е. гипотетически, данная сеть может обслуживать в 10 раз больше абонентов, чем сеть с коммутацией каналов. На момент наступления пиковой нагрузки между какими-либо абонентами часть пакетов при этом будет буферизирована. К тому же, вероятность наступления пиковой нагрузки для всех абонентов одновременно крайне мала.</p>
<p>В качестве стандартной технологии сети с коммутации пакетов выступает сеть Ethernet, особенности функционирования которой через призму протоколов различных уровней будут рассмотрены далее.</p>

<h3>Технология Ethernet</h3>
<p>В 1980 году в институте IEEE был организован "Комитет 802 по стандартизации локальных сетей", в результате работы которого было принято семейство стандартов IEEE 802.х, которые содержат рекомендации для проектирования нижних уровней локальных сетей. Позже результаты его работы легли в основу комплекса международных стандартов ISO 8802-1...5. Эти стандарты были созданы на основе очень распространенных фирменных стандартов сетей Ethernet, ArcNet и Token Ring.</p>
<p>При организации взаимодействия узлов в локальных сетях основная роль отводится протоколу канального уровня. Для того, чтобы канальный уровень мог справиться с этой задачей, структура локальных сетей должна быть вполне определенной и понятной. Для упрощения и, соответственно, удешевления аппаратных и программных решений разработчики первых локальных сетей остановились на совместном использовании кабелей всеми компьютерами сети в режиме разделения времени. Наиболее явным образом режим совместного использования кабеля проявляется в сетях Ethernet (802.3), где коаксиальный кабель физически представляет собой неделимый отрезок кабеля, общий для всех узлов сети (топология «шина»).</p>
<p>Стандарты семейства IEEE 802.x охватывают только два нижних уровня семи уровней модели OSI - физический и канальный. Это связано с тем, что именно эти уровни в наибольшей степени отражают специфику локальных сетей. Старшие же уровни, начиная с сетевого, в значительной степени имеют общие черты самых различных сетей.</p>
<p>Специфика локальных сетей нашла также свое отражение в разделении канального уровня на два подуровня:</p>
<p>а) &nbsp;подуровень управления доступом к среде (Media Access Control, MAC)</p>
<p>б) &nbsp;подуровень логической передачи данных (Logical Link Control, LLC).</p>
<p>MAC-уровень появился из-за существования в локальных сетях разделяемой среды передачи данных. Именно этот уровень обеспечивает корректное совместное использование общей среды, предоставляя ее в соответствии с определенным алгоритмом в распоряжение той или иной станции сети. После того, как доступ к среде получен, ею может пользоваться следующий подуровень, организующий надежную передачу логических единиц данных - кадров информации. В современных локальных сетях получили распространение несколько протоколов MAC-уровня, реализующих различные алгоритмы доступа к разделяемой среде. Эти протоколы полностью определяют специфику таких технологий как Ethernet, Token Ring, FDDI.</p>
<p>Все виды стандартов Ethernet используют один и тот же метод разделения среды передачи данных - метод CSMA/CD.</p>
<p>Физические спецификации технологии Ethernet на сегодняшний день включают следующие среды передачи данных:</p>
<p>&nbsp;</p>
<p>10Base-T - кабель на основе неэкранированной витой пары (Unshielded Twisted Pair, UTP). Образует звездообразную топологию с концентратором. Расстояние между концентратором и конечным узлом - не более 100 м.</p>
<p>100Base-T - кабель на основе неэкранированной витой пары (Unshielded Twisted Pair, UTP). Образует звездообразную топологию. Расстояние между концентратором и конечным узлом - не более 100 м.</p>
<p>100Base-FX – стандарт, использующий оптическое волокно.</p>
<p>1000Base-T - &nbsp;стандарт, использующий витую пару категорий 5e. В передаче данных участвуют 4 пары. Скорость передачи данных — 500 Мбит/с по одной паре. Расстояние до 100 метров.</p>
<p>1000Base-SX/LX/LH -&nbsp; стандарт, использующий оптическое волокно.</p>


<h3>Формат кадра сети Ethernet</h3>
<p>Максимальный размер кадра Ethernet составляет 1526 байт (12208 бит), а минимальный – 72 байт (576 бит). При частоте передачи 10 МГц время передачи пакета минимальной длины составляет 57,6 мс. Это время несколько больше, чем удвоенное время распространения сигнала, равное 51,2 мс, следовательно условие (1) выполняется. Последняя цифра получена исходя из максимально допустимого в Ethernet расстояния между узлами в 2500 м.</p>
<p>Каждый кадр начинается с преамбулы длиной 7 байт, причем каждый байт преамбулы представляет собой чередующуюся последовательность единиц и нулей. Преамбула позволяет принимающей стороне подстроиться под передающую станцию, т. е. синхронизироваться с ней. Следом за преамбулой идет стартовый байт (10101011), сигнализирующий о начале кадра.</p>
<p style="text-align: center;"><img src="http://portal.edu.asu.ru/pluginfile.php/37606/mod_lesson/page_contents/8541/Pic4_1.jpg" height="83" width="646"></p>
<p align="center">Рис. 4.1.&nbsp; Формат кадра Ethernet.</p>
<p>Адреса получателя и отправителя - это локальные адреса для сегмента сети, куда входит соответствующий узел. Для узлов, входящих в локальные сети - это МАС-адрес сетевого адаптера, например, 11-А0-17-3D-BC-01. Эти адреса назначаются производителями оборудования и являются уникальными адресами, так как управляются централизовано. Для всех существующих технологий локальных сетей МАС-адрес имеет формат 6 байтов: старшие 3 байта - идентификатор фирмы производителя, а младшие 3 байта назначаются уникальным образом самим производителем.</p>
<p>&nbsp;Если сетевая плата Ethernet определяет, что адрес получателя совпадает с ее собственным, то, считав кадр, она&nbsp;&nbsp; передает&nbsp;&nbsp; его&nbsp;&nbsp; для&nbsp;&nbsp; дальнейшей&nbsp;&nbsp; обработки&nbsp;&nbsp; на&nbsp;&nbsp; более&nbsp;&nbsp; высокие&nbsp;&nbsp; уровни.&nbsp;&nbsp; Если&nbsp;&nbsp; адреса&nbsp;&nbsp; не совпадают,&nbsp;&nbsp; то&nbsp;&nbsp; кадр&nbsp;&nbsp; игнорируется.&nbsp;&nbsp; Адреса&nbsp;&nbsp; Ethernet&nbsp;&nbsp; могут&nbsp;&nbsp; быть&nbsp;&nbsp; обычными,&nbsp;&nbsp; групповыми&nbsp;&nbsp; и широковещательными. Если все биты адреса равны единице, то это широковещательный адрес, и такой пакет предназначен всем станциям.</p>
<p>Поле длины кадра состоит из двух байтов и определяет длину поля данных (от 0 до 1500 бит). Однако, ввиду ограничений на минимальную длину кадра, поле данных не может быть короче 46 байт. Если же объем передаваемых данных меньше, то поле данных&nbsp; дополняется заполняющими битами.</p>
<p>Заканчивается&nbsp;&nbsp; кадр&nbsp;&nbsp; концевиком –&nbsp;&nbsp; контрольной&nbsp;&nbsp; последовательностью.&nbsp;&nbsp; Она&nbsp;&nbsp; служит&nbsp;&nbsp; для проверки кадра на наличие ошибок.</p>


<h3>Производительность сети Ethernet</h3>
<p>В соответствии с первоначальным стандартом, производительность сегмента сети Ethernet равна 10 Мбит/с. Но для практической пользы необходимо знать производительность сети в кадрах, поскольку именно они транспортируют полезную нагрузку. При постоянной битовой скорости количество поступающих кадров максимально при их минимальной длине, и наоборот. Следовательно, наиболее критичный режим работы будет при обработке большого количества кадров минимальной длины.</p>
<p>Время передачи кадра минимальной длины для сегмента Ethernet-сети 10 Мбит/<br> с равняется 57,5 мкс (рис. 4.2). Вместе с межкадровым интервалом период следования кадров минимальной длины равняется 67,1 мкс. Тогда максимальное количество кадров будет равно 14&nbsp;880 кадров/с. При этом наличие коллизий (одновременные передачи с нескольких источников в единую среду доступа) будет снижать это число, также как и увеличение полезной нагрузки в теле кадра сети Ethernet. Кадр максимальной длины вместе с преамбулой составляет 1526 байт, а максимальное число таких кадров равно 813 кадров/с.&nbsp; &nbsp;</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37606/mod_lesson/page_contents/8543/Pic4_2.jpg" height="81" width="461"></p>
<p align="center">Рис. 4.2. Время передачи кадра минимальной длины в Ethernet-сегменте.</p>
<p>Если же говорить о скорости передачи полезной нагрузки, то нужно будет пересчитать ее с учетом служебной информации и количества передаваемых кадров. В этом случае для кадров минимальной длины, максимальная скорость передачи полезной нагрузки будет равна <i>14880 х 46 х 8 = 5,48 </i>Мбит/с.&nbsp; Для кадров максимальной длины скорость передачи полезной нагрузки будет равна <i>813 х 1500 х 8 = 9,76</i> Мбит/с.&nbsp;</p>


<h1>15. Передача данных в сети Ethernet. Коллизии и механизм разрешения коллизий</h1>
<p>В сетях Ethernet используется метод доступа к среде передачи данных, называемый методом коллективного доступа с опознаванием несущей и обнаружением коллизий (Сarrier-Sense-Multiply-Access with Collision Detection, CSMA/CD). Этот метод используется исключительно в сетях с общей шиной (к которым относятся и радиосети, породившие этот метод). Все компьютеры такой сети имеют непосредственный доступ к общей шине, поэтому она может быть использована для передачи данных между любыми двумя узлами сети.</p>
<p>Передаваемые по сети данные помещаются в кадры определенной структуры и снабжаются уникальным адресом станции назначения. Затем кадр передается по кабелю. Все станции, подключенные к кабелю, могут распознать факт передачи кадра, и та станция, которая узнает собственный адрес в заголовках кадра, записывает его содержимое в свой внутренний буфер, обрабатывает полученные данные и посылает по кабелю кадр-ответ.</p>
<p>При описанном подходе возможна ситуация, когда две станции одновременно пытаются передать кадр данных по общему кабелю. Для уменьшения вероятности этой ситуации непосредственно перед отправкой кадра передающая станция слушает кабель (то есть принимает и анализирует возникающие на нем электрические сигналы), чтобы обнаружить, не передается ли уже по кабелю кадр данных от другой станции. Если опознается несущая (carrier-sense, CS), то станция откладывает передачу своего кадра до окончания чужой передачи, и только потом пытается вновь его передать. Но даже при таком алгоритме две станции одновременно могут решить, что по шине в данный момент времени нет передачи, и начать одновременно передавать свои кадры. Говорят, что при этом происходит коллизия, так как содержимое обоих кадров сталкивается на общем кабеле, что приводит к искажению информации (рис. 4.3).</p>
<p align="center"></p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37607/mod_lesson/page_contents/8542/Pic4_3.jpg" height="250" width="480"></p>
<p align="center">Рис. 4.3. Наступление коллизии в сети Ethernet.</p>
<p>Чтобы корректно обработать коллизию, все станции одновременно наблюдают за возникающими на кабеле сигналами. Если передаваемые и наблюдаемые сигналы отличаются, то фиксируется обнаружение коллизии (collision detection, CD). Для увеличения вероятности немедленного обнаружения коллизии всеми станциями сети, ситуация коллизии усиливается посылкой в сеть станциями, начавшими передачу своих кадров, специальной последовательности битов, называемой jam-последовательностью.</p>
<p>После обнаружения коллизии передающая станция обязана прекратить передачу и ожидать в течение короткого случайного интервала времени, а затем может снова сделать попытку передачи кадра.</p>
<p>Из описания метода доступа видно, что он носит вероятностный характер, и вероятность успешного получения в свое распоряжение общей среды зависит от загруженности сети, то есть от интенсивности возникновения в станциях потребности передачи кадров. При разработке этого метода предполагалось, что скорость передачи данных в 10 Мб/с очень высока по сравнению с потребностями компьютеров во взаимном обмене данными, поэтому загрузка сети будет всегда небольшой. Это предположение остается часто справедливым и по сей день.</p>
<p>Метод CSMA/CD определяет основные временные и логические соотношения, гарантирующие корректную работу всех станций в сети:</p>
<p>&nbsp;&nbsp; а) Между двумя последовательно передаваемыми по общей шине кадрами информации должна выдерживаться пауза в 9.6 мкс; эта пауза нужна для приведения в исходное состояние сетевых адаптеров узлов, а также для предотвращения монопольного захвата среды передачи данных одной станцией.</p>
<p>&nbsp;&nbsp; б) При обнаружении коллизии (условия ее обнаружения зависят от применяемой физической среды) станция выдает в среду специальную 32-х битную последовательность (jam-последовательность), усиливающую явление коллизии для более надежного распознавания ее всеми узлами сети.</p>
<p>&nbsp;&nbsp; в) После обнаружения коллизии каждый узел, который передавал кадр и столкнулся с коллизией, после некоторой задержки пытается повторно передать свой кадр. Узел делает максимально 16 попыток передачи этого кадра информации, после чего отказывается от его передачи. Величина задержки выбирается как равномерно распределенное случайное число из интервала, длина которого экспоненциально увеличивается с каждой попыткой. Такой алгоритм выбора величины задержки снижает вероятность коллизий и уменьшает интенсивность выдачи кадров в сеть при ее высокой загрузке.</p>
<p>Четкое распознавание коллизий всеми станциями сети является необходимым условием корректной работы сети Ethernet. Если какая-либо передающая станция не распознает коллизию и решит, что кадр данных ею передан верно, то этот кадр данных будет утерян, так как информация кадра исказится из-за наложения сигналов при коллизии, он будет отбракован принимающей станцией (скорее всего из-за несовпадения контрольной суммы). Конечно, скорее всего искаженная информация будет повторно передана каким-либо протоколом верхнего уровня, например, транспортным или прикладным, работающим с установлением соединения и нумерацией своих сообщений. Но повторная передача сообщения протоколами верхних уровней произойдет через гораздо более длительный интервал времени (десятки секунд) по сравнению с микросекундными интервалами, которыми оперирует протокол Ethernet. Поэтому, если коллизии не будут надежно распознаваться узлами сети Ethernet, то это приведет к заметному снижению полезной пропускной способности данной сети.</p>
<p>Все параметры протокола Ethernet подобраны таким образом, чтобы при нормальной работе узлов сети коллизии всегда четко распознавались. Именно для этого минимальная длина поля данных кадра должна быть не менее 46 байт (что вместе со служебными полями дает минимальную длину кадра в 72 байта или 576 бит). Длина кабельной системы выбирается таким образом, чтобы за время передачи кадра минимальной длины сигнал коллизии успел бы распространиться до самого дальнего узла сети. Поэтому для скорости передачи данных 10 Мб/с, используемой в стандартах Ethernet, максимальное расстояние между двумя любыми узлами сети не должно превышать 2500 метров.</p>
<p>С увеличением скорости передачи кадров, что имеет место в новых стандартах, базирующихся на том же методе доступа CSMA/CD, например, Fast Ethernet, максимальная длина сети уменьшается пропорционально увеличению скорости передачи. В стандарте Fast Ethernet она составляет 210 м, а в гигабитном Ethernet ограничена 25 метрами.</p>
<p>Независимо от реализации физической среды, все сети Ethernet должны удовлетворять двум ограничениям, связанным с методом доступа: максимальное расстояние между двумя любыми узлами не должно превышать 2500 м,&nbsp; в сети не должно быть более 1024 узлов.</p>


<h1>16. Принципы работы коммутирующего оборудования сети Ethernet. Архитектуры коммутаторов</h1>
<h3>Технология коммутации кадров</h3>
<p>Ограничения стандартов Ethernet первых поколений выявил ряд проблем, связанных с необходимостью построения крупных локальных сетей на принципах единой разделяемой среды. Увеличивающиеся объемы трафика и число узлов приводило к существенному снижению производительности за счет увеличения случаев обнаружения и предотвращения возникающих коллизий. Разумное решение в данном случае – провести логическую структуризацию, разделив общее пространство на несколько сегментов и локализовав тем самым общее коллизийное пространство. Первоначальная идея разделения сети на сегменты получила свое законченное представление в виде <b>технологии коммутации</b>, которая в настоящее время определяет работу всех локальных сетей технологии Ethernet. Устройства, реализующие технологию коммутации на сети, называют <b>Ethernet</b><b>-коммутаторами</b>.</p>
<p>Технология коммутации сегментов Ethernet была предложена фирмой Kalpana в 1990 году. Она работает на канальном уровне, коммутатор при этом анализирует заголовки кадров, автоматически строит адресную таблицу и на основании этой таблицы перенаправляет кадр в один из своих выходных портов или фильтрует его, удаляя из буфера. Каждый порт обслуживается одним процессором пакетов Ethernet - EPP (Ethernet Packet Processor). Кроме того, коммутатор имеет системный модуль, который координирует работу всех процессоров EPP. Системный модуль ведет общую адресную таблицу коммутатора и обеспечивает управление коммутатором. Для передачи кадров между портами используется коммутационная матрица, подобная тем, которые работают в телефонных коммутаторах или мультипроцессорных компьютерах, соединяя несколько процессоров с несколькими модулями памяти.</p>
<p>При поступлении кадра в какой-либо порт процессор EPP буферизует несколько первых байт кадра, для того, чтобы прочитать адрес назначения. После получения адреса назначения процессор сразу же принимает решение о передаче пакета, не дожидаясь прихода остальных байт кадра. Для этого он просматривает свой собственный кэш адресной таблицы, а если не находит там нужного адреса, то обращается к системному модулю, который работает в многозадачном режиме, параллельно обслуживая запросы всех процессоров EPP. Системный модуль производит просмотр общей адресной таблицы и возвращает процессору найденную строку, которую тот буферизует в своем кэше для последующего использования.</p>
<p>После нахождения адреса назначения в адресной таблице, процессор EPP знает, что нужно дальше делать с поступающим кадром (во время просмотра адресной таблицы процессор продолжал буферизацию поступающих в порт байт кадра). Если кадр нужно отфильтровать, то процессор просто прекращает записывать в буфер байты кадра и ждет поступления нового кадра.</p>
<p>Если же кадр нужно передать на другой порт, то процессор обращается к коммутационной матрице и пытается установить в ней путь, связывающий его порт с портом адреса назначения (рис. 4.4). Коммутационная матрица может это сделать только в том случае, когда порт адреса назначения в этот момент свободен, то есть не соединен с другим портом. Если же порт занят, то кадр полностью буферизуется процессором входного порта, после чего процессор ожидает освобождения выходного порта и образования коммутационной матрицей нужного пути.</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37609/mod_lesson/page_contents/8544/Pic4_4.jpg" height="376" width="429"></p>
<p align="center">Рис. 4.4. Работа коммутационной матрицы коммутатора.</p>
<p>После того, как нужный путь установился, в него направляются буферизованные байты кадра, которые принимаются процессором выходного порта, а после получения им доступа к среде передаются в сеть. Процессор входного порта постоянно хранит несколько байт принимаемого кадра в своем буфере, что позволяет ему независимо и асинхронно принимать и передавать байты кадра.</p>


<h3>Архитектуры Ethernet-коммутаторов</h3>
<p>В настоящее время коммутаторы используют в качестве базовой одну из трех схем взаимодействия своих блоков или модулей:</p>
<p>а) коммутационная матрица;</p>
<p>б) разделяемая многовходовая память;</p>
<p>в) &nbsp;общая шина.</p>
<p>Часто эти три способа взаимодействия комбинируются в одном коммутаторе.</p>
<p><b>Коммутационная матрица</b> - основной и самый быстрый способ взаимодействия процессоров портов, именно он был реализован в первом промышленном коммутаторе локальных сетей. Однако, реализация матрицы возможна только для определенного числа портов, причем сложность схемы возрастает пропорционально квадрату количества портов коммутатора. Входные блоки процессоров портов на основании просмотра адресной таблицы коммутатора определяют по адресу назначения номер выходного порта. Эту информацию они добавляют к байтам исходного кадра в виде специального ярлыка - тэга (tag). Для данного примера тэг представляет просто 3-х разрядное двоичное число, соответствующее номеру выходного порта.</p>
<p>Матрица состоит из трех уровней двоичных переключателей, которые соединяют свой вход с одним из двух выходов в зависимости от значения бита тэга. Переключатели первого уровня управляются первым битом тэга, второго - вторым, а третьего - третьим.</p>
<p><b>Коммутаторы с общей шиной</b> используют для связи процессоров портов высокоскоростную шину, используемую в режиме разделения времени (рис.4.5). Для того, чтобы шина не была узким местом коммутатора, ее производительность должна быть по крайней мере в N/2 раз выше скорости поступления данных во входные блоки процессоров портов. Кроме этого, кадр должен передаваться по шине небольшими частями, по несколько байт, чтобы передача кадров между несколькими портами происходила в псевдопараллельном режиме, не внося задержек в передачу кадра в целом.</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37609/mod_lesson/page_contents/8545/Pic4_5.jpg" height="253" width="467"></p>
<p align="center">Рис. 4.5. Схема работы коммутатора с общей шиной.</p>
<p>Входной блок процессора помещает в ячейку, переносимую по шине, тэг, в котором указывает номер порта назначения. Каждый выходной блок процессора порта содержит фильтр тэгов, который выбирает тэги, предназначенные данному порту. Шина, так же как и коммутационная матрица, не может осуществлять промежуточную буферизацию, но так как данные кадра разбиваются на небольшие ячейки, то задержек с начальным ожиданием доступности выходного порта в такой схеме нет.</p>
<p>Третья базовая архитектура взаимодействия портов - <b>двухвходовая разделяемая память</b>. Входные блоки процессоров портов соединяются с переключаемым входом разделяемой памяти, а выходные блоки этих же процессоров соединяются с переключаемым выходом этой памяти (рис 4.6). Переключением входа и выхода разделяемой памяти управляет менеджер очередей выходных портов. В разделяемой памяти менеджер организует несколько очередей данных, по одной для каждого выходного порта. Входные блоки процессоров передают менеджеру портов запросы на запись данных в очередь того порта, который соответствует адресу назначения пакета. Менеджер по очереди подключает вход памяти к одному из входных блоков процессоров и тот переписывает часть данных кадра в очередь определенного выходного порта. По мере заполнения очередей менеджер производит также поочередное подключение выхода разделяемой памяти к выходным блокам процессоров портов, и данные из очереди переписываются в выходной буфер процессора.</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37609/mod_lesson/page_contents/8545/Pic4_6.jpg" height="190" width="453"></p>
<p align="center">Рис. 4.6. Схема работы коммутатора с разделяемой памятью.</p>
<p>Память должна быть достаточно быстродействующей для поддержания скорости переписи данных между N портами коммутатора. Применение общей буферной памяти, гибко распределяемой менеджером между отдельными портами, снижает требования к размеру буферной памяти процессора порта.</p>
<p>У каждой из описанных архитектур есть свои преимущества и недостатки, поэтому часто в сложных коммутаторах эти архитектуры применяются <b>в комбинации</b> друг с другом (рис.4.7). Коммутатор состоит из модулей с фиксированным количеством портов (2 - 8), выполненных на основе специализированной БИС (ASIC), реализующей архитектуру коммутационной матрицы. Если порты, между которыми нужно передать кадр данных, принадлежат одному модулю, то передача кадра осуществляется процессорами модуля на основе имеющейся в модуле коммутационной матрицы. Если же порты принадлежат разным модулям, то процессоры общаются по общей шине. При такой архитектуре передача кадров внутри модуля будет происходить чаще всего быстрее, чем при межмодульной передаче, так как коммутационная матрица - наиболее быстрый, хотя и наименее масштабируемый способ взаимодействия портов. Скорость внутренней шины коммутаторов может достигать нескольких Гб/c, а у наиболее мощных моделей - до 10 - 14 Гб/с.</p>

<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37609/mod_lesson/page_contents/8545/Pic4_7.jpg" height="172" width="428">
</p>
<p align="center">Рис.4.7. Комбинирование архитектур.</p>

<h1>17. Принцип организации виртуальных локальных вычислительных сетей на базе 802.1Q</h1>
<p><b>VLAN (Virtual Local Area Network)</b> — группа устройств, имеющих возможность взаимодействовать между собой напрямую на канальном уровне, хотя физически при этом они могут быть подключены к разным сетевым коммутаторам. И наоборот, устройства, находящиеся в разных VLAN'ах, невидимы друг для друга на канальном уровне, даже если они подключены к одному коммутатору, и связь между этими устройствами возможна только на сетевом и более высоких уровнях.</p>
<p>В современных сетях VLAN — главный механизм для создания логической топологии сети, не зависящей от её физической топологии.</p>
<p>Задачи, решаемые при помощи VLAN:</p>
<p>&nbsp;1) Гибкое разделение устройств на группы</p>
<p>&nbsp;&nbsp;&nbsp; Как правило, одному VLAN соответствует одна подсеть. Устройства, находящиеся в разных VLAN, будут находиться в разных подсетях. Но в то же время VLAN не привязан к местоположению устройств и поэтому устройства, находящиеся на расстоянии друг от друга, все равно могут быть в одном VLAN независимо от местоположения</p>
<p>2) Уменьшение количества широковещательного трафика в сети</p>
<p>&nbsp;&nbsp;&nbsp; Каждый VLAN — это отдельный широковещательный домен. Например, коммутатор — это устройство 2 уровня модели OSI. Все порты на коммутаторе, где нет VLANов, находятся в одном широковещательном домене. Создание VLAN на коммутаторе означает разбиение коммутатора на несколько широковещательных доменов. Если один и тот же VLAN есть на разных коммутаторах, то порты разных коммутаторов будут образовывать один широковещательный домен.</p>
<p>3) Увеличение безопасности и управляемости сети</p>
<p>Компьютер при отправке трафика в сеть даже не догадывается, в каком VLAN'е он размещён. Об этом думает коммутатор. Коммутатор знает, что компьютер, который подключен к определённому порту, находится в соответствующем VLAN'e. Трафик, приходящий на порт определённого VLAN'а, ничем особенным не отличается от трафика другого VLAN'а. Другими словами, никакой информации о принадлежности трафика определённому VLAN'у в нём нет.</p>
<p>Однако, если через порт может прийти трафик разных VLAN'ов, коммутатор должен его как-то различать. Для этого каждый кадр (frame) трафика должен быть помечен каким-то особым образом. Пометка должна говорить о том, какому VLAN'у трафик принадлежит.</p>
<p>Наиболее распространённый сейчас способ ставить такую пометку описан в открытом стандарте IEEE 802.1Q (рис.4.8).</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37610/mod_lesson/page_contents/8546/Pic4_8.jpg" height="139" width="416"></p>
<p align="center">Рис. 4.8. Кадр Ethernet в соответствии с IEEE 802.1q.</p>
<p>PREAMBLE. Семь байт данных, предназначеных для синхронизации. Каждый байт содержит одну и ту же последовательность: 10101010. Это поле используется для того, чтобы дать возможность схемам трансиверов прийти в устойчивый синхронизм с принимаемыми сигналами. Так же в это поле включается байт SFD (тут не показан) - начального ограничителя кадров, который имеет вид: 10101011. Появление этой комбинации является указанием на предстоящий приём кадра.</p>
<p>&nbsp;&nbsp; DEST MAC. Аппаратный адрес получателя (Destination).</p>
<p>&nbsp;&nbsp; SRC MAC. Аппаратный адрес источника (Source).</p>
<p>&nbsp;&nbsp; TYPE: Тип протокола верхнего уровня.</p>
<p>&nbsp;&nbsp; DATA: Собственно данные кадра. Может занимать от 0 до 1500 байт, но если данных меньше 46 байт, то используется специальное поле дополнения, здесь не обозначено. Таким образом считаем, что кадр содержит 46-1546 байт. Поле дополнения служит для эффективного определения коллизий.</p>
<p>&nbsp;&nbsp; FCS: Контрольная сумма кадра по CRC32. При отправке кадра передающая станция вычисляет специальным алгоритмом значение, которое записывается в это поле. В значении учитываются все биты кадра. При получении кадра, принимающая сторона вычисляет это значение снова (без учёта этого поля) и сравнивает со значением в поле. Если они равны, то считается, что кадр получен без ошибок.</p>
<p>Новые поля TPID и TCI образуют «заголовок 802.1q», который содержит следующую информацию:</p>
<p>Биты 1-16&nbsp; - &nbsp; Tag Protocol Identifier. На схеме это TPID. Для 802.1Q всегда равен 0x810. То есть встретив эти 2 байта можно сделать вывод, что трафик меченый.</p>
<p>Биты 17-19&nbsp; - Priority. Приоритет трафика. Эти три бита используются стандартом 802.1p для задания приоритета трафика. Это и два следующих поля - TCI.</p>
<p>Бит 20&nbsp; - Canonical Format Indicator - индикатор канонического формата MAC-адреса. Если бит = 0, - канонический. Если = 1, не канонический.</p>
<p>Биты 21-32 &nbsp;&nbsp; - VLAN Identifier. В этих 12 битах закодирован номер VLAN. Может принимать значение от 0 до 4094. Не все коммутаторы поддерживают такое количество, да и по правде сказать, не всегда такое нужно. В конкретном случае это значение равно 0xA, что означает VLAN с идентификатором 10 (или номер 10).</p>
<p>Все базовые механизмы коммутатора остаются точно такими же как и до разделения на VLAN, но они используются только в пределах соответствующего VLAN. Например, если хост из VLAN 10 отправляет широковещательный фрейм, то он будет отправлен только на порты в этом VLAN. Получается, что порты коммутатора работают в обычном режиме. Это просто возможность сообщить коммутатору о том, какому VLAN принадлежат порты. Затем коммутатор использует эту информацию при передаче фреймов.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37610/mod_lesson/page_contents/8546/Pic4_9.jpg" height="271" width="454"></p>
<p align="center">Рис. 4.9. Объединение узлов на сети Ethernet в различные VLAN-ы.</p>
<p>Для организации VLAN на базе крупной локальной сети из нескольких коммутаторов используются специально настроенные порты коммутатора, которые позволяют принимать и отправлять кадры Ethernet стандарта 802.1Q. Такие порты называют <b>тегированными</b>. Тегированный порт позволяет коммутатору передать трафик нескольких VLAN'ов через один порт и сохранить при этом информацию о том, в пределах какого именно VLAN'а передается фрейм. Т.е. тегированные порты коммутаторов передают не обычные Ethernet-кадры, а кадры в соответствии со стандартом описания VLAN-ов (например, 802.1q). На коммутаторах sw1 и sw2 порты 21 и 22, соответственно, это тегированные порты.</p>
<p>Для того, чтобы коммутаторы понимали какому VLAN принадлежит пришедший фрейм и использовали соответствующую таблицу коммутации для его обработки, выполняется тегирование фрейма. Например, если хост E передает фрейм хосту A, то коммутатор sw2 проверяет свою таблицу и видит, что хост A доступен через порт 22. Так как порт настроен как тегированный, то когда фрейм выходит с порта 22 в нём проставляется тег, который указывает какому VLAN'у принадлежит этот фрейм. В данном случае проставляется тег с VLAN'ом 2.</p>
<p>Коммутатор sw1 получает тегированный фрейм через тегированный порт 21. Для того чтобы определить на какой порт его передавать далее sw1 использует таблицу коммутации для VLAN 2 (так как этот VLAN был указан в теге). На коммутаторе sw1 порт 21 должен быть настроен как тегированный для того чтобы коммутатор не отбрасывал тегированные фреймы, а считывал информацию тега. И соответственно чтобы он также помечал фрейм тегом, когда будет передаваться трафик коммутатору sw2.</p>
<p>Остальные порты коммутатора остаются нетегированными. И для хостов операция тегирования, которую выполняют коммутаторы абсолютно прозрачна. Хосты ничего не знают о тегах и получают обычные фреймы.&nbsp; Без тега коммутатор не сможет различить трафик различных VLAN'ов.</p>
<p>Аналогичные действия выполняются, например, при передаче фрейма от хоста C хосту G.</p>
<p>Если порт нетегированный в каком-то VLAN'е, то трафик этого VLAN передается без тега. Если порт тегирован для нескольких VLAN'ов, то в этом случае весь нетегированный трафик будет приниматься специальным родным VLAN'ом (native VLAN).</p>
<p>Если порт принадлежит только одному VLAN как нетегированный, то тегированный трафик, приходящий через такой порт, должен удаляться. На деле это поведение обычно настраивается. Все необходимые преобразования прозрачно внутри себя делает коммутатор.</p>


<h1>19. Протокол IP. Понятие стека протоколов. Адресация. Передача данных в IP-сети. Фрагментация IP-пакетов</h1>
<h3>Протокол IP как основа транспортной среды сетевого уровня</h3>
<p>Основу транспортных средств составляет протокол межсетевого взаимодействия - Internet Protocol (IP). Протокол занимает 3 уровень в модели OSI. С точки зрения организационной структуры протокола IP единицей транспортирования являются пакеты. К основным функциям протокола IP относятся:</p>
<p>&nbsp; -&nbsp; перенос между сетями различных типов адресной информации в унифицированной форме,</p>
<p>&nbsp; -&nbsp; сборка и разборка пакетов при передаче их между сетями с различным максимальным значением длины пакета.</p>
<p>С точки зрения модели OSI пакеты IP являются «данными» для кадров(пакетов) протоколов предыдущего уровня - т.е. уровня 2 / протокола Ethernet.</p>
<p>Пакет IP состоит из заголовка и поля данных. Заголовок пакета имеет следующие поля (рис. 5.1):</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37612/mod_lesson/page_contents/8548/Pic5_1.jpg" height="401" width="497">Рис.5.1. Заголовок IP-пакета.</p>
<p>&nbsp;</p>
<p>&nbsp; -&nbsp; Поле Номер версии (VERS) указывает версию протокола IP. Сейчас повсеместно используется версия 4 и ведется переход на версию 6, называемую также IPng (IP next generation).</p>
<p>&nbsp;&nbsp; - Поле Длина заголовка (HLEN) пакета IP занимает 4 бита и указывает значение длины заголовка, измеренное в 32-битовых словах. Обычно заголовок имеет длину в 20 байт (пять 32-битовых слов), но при увеличении объема служебной информации эта длина может быть увеличена за счет использования дополнительных байт в поле Резерв (IP OPTIONS).</p>
<p>&nbsp;&nbsp; - Поле Тип сервиса (SERVICE TYPE) занимает 1 байт и задает приоритетность пакета и вид критерия выбора маршрута. Первые три бита этого поля образуют подполе приоритета пакета (PRECEDENCE). Приоритет может иметь значения от 0 (нормальный пакет) до 7 (пакет управляющей информации). Приоритет может приниматься во внимание при очередности обработки пакетов. Поле Тип сервиса содержит также три бита, определяющие критерий выбора маршрута. Установленный бит D (delay) говорит о том, что маршрут должен выбираться для минимизации задержки доставки данного пакета, бит T - для максимизации пропускной способности, а бит R - для максимизации надежности доставки.</p>
<p>&nbsp; -&nbsp; Поле Общая длина (TOTAL LENGTH) занимает 2 байта и указывает общую длину пакета с учетом заголовка и поля данных.</p>
<p>&nbsp;&nbsp; - Поле Идентификатор пакета (IDENTIFICATION) занимает 2 байта и используется для распознавания пакетов, образовавшихся путем фрагментации исходного пакета. Все фрагменты должны иметь одинаковое значение этого поля.</p>
<p>&nbsp;&nbsp; - Поле Флаги (FLAGS) занимает 3 бита, оно указывает на возможность фрагментации пакета (установленный бит Do not Fragment - DF - запрещает маршрутизатору фрагментировать данный пакет), а также на то, является ли данный пакет промежуточным или последним фрагментом исходного пакета (установленный бит More Fragments - MF - говорит о том пакет переносит промежуточный фрагмент).</p>
<p>&nbsp; - Поле Смещение фрагмента (FRAGMENT OFFSET) занимает 13 бит, оно используется для указания в байтах смещения поля данных этого пакета от начала общего поля данных исходного пакета, подвергнутого фрагментации. Используется при сборке/разборке фрагментов пакетов при передачах их между сетями с различными величинами максимальной длины пакета.</p>
<p>&nbsp; - Поле Время жизни (TIME TO LIVE) занимает 1 байт и указывает предельный срок, в течение которого пакет может перемещаться по сети. Время жизни данного пакета измеряется в секундах и задается источником передачи средствами протокола IP.</p>
<p>&nbsp; - Идентификатор Протокола верхнего уровня (PROTOCOL) занимает 1 байт и указывает, какому протоколу верхнего уровня принадлежит пакет (например, это могут быть протоколы TCP, UDP).</p>
<p>&nbsp; - Контрольная сумма (HEADER CHECKSUM) занимает 2 байта, она рассчитывается по всему заголовку.</p>
<p>&nbsp;&nbsp; - Поля Адрес источника (SOURCE IP ADDRESS) и Адрес назначения (DESTINATION IP ADDRESS) имеют одинаковую длину - 32 бита, и одинаковую структуру.</p>
<p>&nbsp;&nbsp; - Поле Резерв (IP OPTIONS) является необязательным и используется обычно только при отладке сети. Это поле состоит из нескольких подполей, каждое из которых может быть одного из восьми предопределенных типов. Так как число подполей может быть произвольным, то в конце поля Резерв должно быть добавлено несколько байт для выравнивания заголовка пакета по 32-битной границе.</p>
<p>Максимальная длина поля данных пакета ограничена разрядностью поля, определяющего эту величину, и составляет 65535 байтов, однако при передаче по сетям различного типа длина пакета выбирается с учетом максимальной длины пакета протокола нижнего уровня, несущего IP-пакеты. Если это кадры Ethernet, то выбираются пакеты с максимальной длиной в 1500 байтов, умещающиеся в поле данных кадра Ethernet.</p>
<p>После заголовка идет поле с данными, передаваемыми в IP-пакете.</p>


<h3>Адресация в IP-сети</h3><p>Протокол IP предназначен для объединенной сети, состоящей из соединенных друг с другом&nbsp; отдельных разнородных пакетных подсетей, к которым подключаются разнородные машины.</p>
<p>Каждая из подсетей работает в соответствии со своими специфическими требованиями и имеет свою природу средств связи. Однако предполагается, что каждая подсеть может принять пакет информации (данные с соответствующим сетевым заголовком) и доставить его по указанному адресу в этой конкретной&nbsp; подсети.</p>
<p>Не требуется, чтобы подсеть гарантировала обязательную доставку пакетов и имела надежный сквозной протокол.</p>
<p>Таким образом, две машины, подключенные к одной подсети, могут обмениваться пакетами.</p>
<p>Когда необходимо передать пакет между машинами, подключенными к разным подсетям, то машина-отправитель посылает пакет в соответствующий шлюз (шлюз подключен к подсети также как обычный узел). Оттуда пакет направляется по определенному маршруту через систему шлюзов и подсетей, пока не достигнет шлюза, подключенного к той же подсети, что и машина-получатель: там пакет направляется к получателю.</p>
<p>Таким образом, адрес получателя должен содержать в себе:</p>
<p>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; номер (адрес) подсети;</p>
<p>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; номер (адрес) участника (хоста) внутри подсети.</p>
<p>&nbsp;IP адреса представляют собой 32-х разрядные двоичные числа. Для удобства их записывают в виде четырех десятичных чисел, разделенных точками. Каждое число является десятичным эквивалентом соответствующего байта адреса (для удобства будем записывать точки и в двоичном изображении).</p>
<p>192.168.200.47</p>
<p>является десятичным эквивалентом двоичного адреса</p>
<p>11000000.10101000.11001000.00101111</p>
<p>Рассмотрим структуры IP-адреса (рис.5.2).</p>
<p align="center">Класс А</p>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="83">
<p class="a0" align="center">0</p>
</td>
<td width="273">
<p class="a0" align="center">N сети</p>
</td>
<td width="287">
<p class="a0" align="center">N узла</p>
</td>
</tr>
</tbody>
</table>
<p align="center">Класс В</p>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="73">
<p class="a0" align="center">1</p>
</td>
<td width="73">
<p class="a0" align="center">0</p>
</td>
<td width="242">
<p class="a0" align="center">N сети</p>
</td>
<td width="254">
<p class="a0" align="center">N узла</p>
</td>
</tr>
</tbody>
</table>
<p align="center">Класс С</p>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="66">
<p class="a0" align="center">1</p>
</td>
<td width="66">
<p class="a0" align="center">1</p>
</td>
<td width="66">
<p class="a0" align="center">0</p>
</td>
<td width="217">
<p class="a0" align="center">N сети</p>
</td>
<td width="228">
<p class="a0" align="center">N узла</p>
</td>
</tr>
</tbody>
</table>
<p align="center">Класс D</p>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="46">
<p class="a0" align="center">1</p>
</td>
<td width="46">
<p class="a0" align="center">1</p>
</td>
<td width="46">
<p class="a0" align="center">1</p>
</td>
<td width="46">
<p class="a0" align="center">0</p>
</td>
<td width="460">
<p class="a0" align="center">адрес группы multicast</p>
</td>
</tr>
</tbody>
</table>
<p align="center">Класс Е</p>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="53">
<p class="a0" align="center">1</p>
</td>
<td width="53">
<p class="a0" align="center">1</p>
</td>
<td width="53">
<p class="a0" align="center">1</p>
</td>
<td width="53">
<p class="a0" align="center">1</p>
</td>
<td width="53">
<p class="a0" align="center">0</p>
</td>
<td width="378">
<p class="a0" align="center">зарезервирован</p>
</td>
</tr>
</tbody>
</table>
<p align="center">&nbsp;</p>
<p align="center">Рис. 5.2. Структура IР-адреса.</p>
<p align="center">&nbsp;</p>
<p>Адрес состоит из двух логических частей - номера сети и номера узла в сети. Какая часть адреса относится к номеру сети, а какая к номеру узла, определяется значениями первых битов адреса:</p>
<ol>
<li>Если адрес начинается с 0, то сеть относят к классу А, и номер сети занимает один байт, остальные 3 байта интерпретируются как номер узла в сети. Сети класса А имеют номера в диапазоне от 1 до 126. (Номер 0 не используется, а номер 127 зарезервирован для специальных целей, о чем будет сказано ниже.) В сетях класса А количество узлов должно быть больше 216 , но не превышать 224.</li>
<li>Если первые два бита адреса равны 10, то сеть относится к классу В и является сетью средних размеров с числом узлов 28 - 216. В сетях класса В под адрес сети и под адрес узла отводится по 16 битов, то есть по 2 байта.</li>
<li>Если адрес начинается с последовательности 110, то это сеть класса С с числом узлов не больше 28. Под адрес сети отводится 24 бита, а под адрес узла - 8 битов.</li>
<li>Если адрес начинается с последовательности 1110, то он является адресом класса D и обозначает особый, групповой адрес - multicast. Если в пакете в качестве адреса назначения указан адрес класса D, то такой пакет должны получить все узлы, которым присвоен данный адрес.</li>
<li>Если адрес начинается с последовательности 11110, то это адрес класса Е, он зарезервирован для будущих применений.</li>
</ol>
<pre><strong>Соглашения о специальных адресах: broadcast, multicast, loopback</strong></pre>
<p>В протоколе IP существует несколько соглашений об особой интерпретации IP-адресов:</p>
<ul>
<li>если IР-адрес состоит только из двоичных нулей, то он обозначает адрес того узла, который сгенерировал этот пакет;</li>
<li>если в поле номера сети стоят 0, то по умолчанию считается, что этот узел принадлежит той же самой сети, что и узел, который отправил пакет;</li>
<li>если все двоичные разряды IP-адреса равны 1, то пакет с таким адресом назначения должен рассылаться всем узлам, находящимся в той же сети, что и источник этого пакета. Такая рассылка называется ограниченным широковещательным сообщением (limited broadcast);</li>
<li>если в поле адреса назначения стоят сплошные 1, то пакет, имеющий такой адрес рассылается всем узлам сети с заданным номером. Такая рассылка называется широковещательным сообщением (broadcast);</li>
<li>адрес 127.0.0.1 зарезервирован для организации обратной связи при тестировании работы программного обеспечения узла без реальной отправки пакета по сети. Этот адрес имеет название loopback.</li>
</ul>
<p>Уже упоминавшаяся форма группового IP-адреса - multicast - означает, что данный пакет должен быть доставлен сразу нескольким узлам, которые образуют группу с номером, указанным в поле адреса. Узлы сами идентифицируют себя, то есть определяют, к какой из групп они относятся. Один и тот же узел может входить в несколько групп. Такие сообщения в отличие от широковещательных называются мультивещательными. Групповой адрес не делится на поля номера сети и узла и обрабатывается маршрутизатором особым образом.</p>
<p>В протоколе IP нет понятия широковещательности в том смысле, в котором оно используется в протоколах канального уровня локальных сетей, когда данные должны быть доставлены абсолютно всем узлам. Как ограниченный широковещательный IP-адрес, так и широковещательный IP-адрес имеют пределы распространения в интерсети - они ограничены либо сетью, к которой принадлежит узел - источник пакета, либо сетью, номер которой указан в адресе назначения. Поэтому деление сети с помощью маршрутизаторов на части локализует широковещательный шторм пределами одной из составляющих общую сеть частей просто потому, что нет способа адресовать пакет одновременно всем узлам всех сетей составной сети.</p>
<p>Важным элементом разбиения адресного пространства являются подсети. Подсеть - это подмножество сети, не пересекающееся с другими подсетями. Это означает, что сеть организации (скажем, сеть класса С) может быть разбита на фрагменты, каждый из которых будет составлять подсеть. Реально, каждая подсеть может соответствовать физической локальной сети (например, сегменту Ethernet).&nbsp;</p>
<p>Количество разрядов адреса подсети может быть различным и определяется <b>маской сети</b>. Маска сети также является 32-х разрядным двоичным числом. Разряды маски имеют следующий смысл:</p>
<p>1. если разряд маски равен 1, то соответствующий разряд адреса является разрядом адреса подсети;</p>
<p>2. если разряд маски равен 0, то соответствующий разряд адреса является разрядом хоста внутри подсети.</p>
<p>Все единичные разряды маски (если они есть) находятся в старшей (левой) части маски, а нулевые (если они есть) – в правой (младшей).</p>
<p>Исходя из вышесказанного, маску часто записывают в виде числа единиц в ней содержащихся.</p>
<p>255.255.248.0 (11111111.11111111.11111000.00000000) – является правильной маской подсети (/21),</p>
<p>а 255.255.250.0 (11111111.11111111.11111010.00000000) – является неправильной, недопустимой.</p>
<p>Нетрудно увидеть, что максимальный размер подсети может быть только степенью двойки (двойку надо возвести в степень, равную количеству нулей в маске).</p>
<p>При передаче пакетов используются правила маршрутизации, главное из которых звучит так:</p>
<p>«Пакеты участникам своей подсети доставляются напрямую, а остальным – по другим правилам маршрутизации».</p>
<p>Таким образом, прежде чем отправлять пакет, требуется определить, является ли получатель членом нашей подсети или нет.</p>
<p>Определение диапазона адресов подсети можно произвести из определения понятия маски:</p>
<p>1. те разряды, которые относятся к адресу подсети, у всех хостов подсети должны быть одинаковы;</p>
<p>2. адреса хостов в подсети могут быть любыми.</p>
<p>То есть, если наш адрес 192.168.200.47 и маска равна /20, то диапазон можно посчитать:</p>
<p>11000000.10101000.11001000.00101111 – адрес</p>
<p>11111111.11111111.11110000.00000000 – маска</p>
<p>11000000.10101000.1100ХХХХ.ХХХХХХХХ – диапазон адресов</p>
<p>где 0,1 – определенные значения разрядов,&nbsp; Х – любое значение,</p>
<p>Что приводит к диапазону адресов:</p>
<p>от</p>
<p>11000000.10101000.11000000.00000000 (192.168.192.0)</p>
<p>до</p>
<p>11000000.10101000.11001111.11111111 (192.168.207.255)</p>
<p>&nbsp;</p>
<p>Следует учитывать, что некоторые адреса являются запрещенными или служебными и их нельзя использовать для адресов хостов или подсетей.&nbsp; Это:</p>
<p>самый первый адрес в подсети - является (условно) общим адресом подсети.</p>
<p>самый последний адрес в подсети - является широковещательным (броадкастовым) адресом для подсети</p>
<p>127&nbsp;&nbsp;&nbsp; в первом байте (внутренняя петля – этот адрес имеется в каждом хосте и служит для связывания компонентов сетевого уровня).</p>
<p>Поэтому доступный диапазон адресов будет несколько меньше.</p>

<h2>1. Протокол IP</h2><h3>Связь между Ethernet и IP-сетями. Протокол ARP</h3><p>Любое устройство, подключенное к локальной сети, имеет уникальный физический сетевой адрес, заданный аппаратным образом. 6-байтовый Ethernet-адрес выбирает изготовитель сетевого интерфейсного оборудования из выделенного для него по лицензии адресного пространства. Если у машины меняется сетевой адаптер, то меняется и ее Ethernet-адрес.</p>
<p>4-байтовый IP-адрес задает менеджер сети с учетом положения машины в сети Интернет. Если машина перемещается в другую часть сети Интернет, то ее IP-адрес должен быть изменен. Преобразование IP-адресов в сетевые выполняется с помощью arp-таблицы. Каждая машина сети имеет отдельную ARP-таблицу для каждого своего сетевого адаптера. Не трудно видеть, что существует проблема отображения физического адреса (6 байт для Ethernet) в пространство сетевых IP-адресов (4 байта) и наоборот.</p>
<p>Протокол ARP (address resolution protocol, RFC-826) решает именно эту проблему - преобразует ARP- в Ethernet-адреса.</p>
<p>Рассмотрим процедуру преобразования адресов при отправлении сообщения. Пусть прикладная программа одной ЭВМ отправляет сообщение другой. Прикладной программе IP-адрес места назначения обычно известен. Для определения Ethernet-адреса просматривается ARP-таблица. Если для требуемого IP-адреса в ней присутствует Ethernet-адрес, то формируется и посылается соответствующий пакет. Если же с помощью ARP-таблицы не удается преобразовать адрес, то выполняется следующее:</p>
<p>1. Всем машинам в сети посылается пакет с ARP-запросом (с широковещательным Ethernet-адресом места назначения).</p>
<p>2. Исходящий IP-пакет ставится в очередь.</p>
<p>Каждая машина, принявшая ARP-запрос, в своем ARP-модуле сравнивает собственный IP-адрес с IP-адресом в запросе. Если IP-адрес совпал, то прямо по Ethernet-адресу отправителя запроса посылается ответ, содержащий как IP-адрес ответившей машины, так и ее Ethernet-адрес. После получения ответа на свой ARP-запрос машина имеет требуемую информацию о соответствии IP и Ethernet-адресов, формирует соответствующий элемент ARP-таблицы и отправляет IP-пакет, ранее поставленный в очередь. Если же в сети нет машины с искомым IP-адресом, то ARP-ответа не будет и не будет записи в ARP-таблицу. Протокол IP будет уничтожать IP-пакеты, предназначенные для отправки по этому адресу. Также протоколы верхнего уровня не могут отличить случай повреждения в среде Ethernet от случая отсутствия машины с искомым IP-адресом.</p>
<p>Функционально, ARP делится на две части. Одна - определяет физический адрес при посылке пакета, другая отвечает на запросы других машин. ARP-таблицы имеют динамический характер, каждая запись в ней "живет" определенное время после чего удаляется. Менеджер сети может осуществить запись в ARP-таблицу, которая там будет храниться "вечно". ARP-пакеты вкладываются непосредственно в ethernet-кадры.</p>


<h1>20. Протокол TCP и UDP. Основные особенности и различия. Понятие TCP-сессии, начала и завершения обмена</h1>
<h3>Протокол UDP</h3>
<p>Задачей протокола транспортного уровня UDP (User Datagram Protocol) является передача данных между прикладными процессами без гарантий доставки, поэтому его пакеты могут быть потеряны, продублированы или прийти не в том порядке, в котором они были отправлены.</p>
<p>В то время, как задачей сетевого уровня является передача данных между произвольными узлами сети, задача транспортного уровня заключается в передаче данных между любыми прикладными процессами, выполняющимися на любых узлах сети. Действительно, после того, как пакет средствами протокола IP доставлен в компьютер-получатель, данные необходимо направить конкретному процессу-получателю. Каждый компьютер может выполнять несколько процессов, более того, прикладной процесс тоже может иметь несколько точек входа, выступающих в качестве адреса назначения для пакетов данных.</p>
<p>Пакеты, поступающие на транспортный уровень, организуются операционной системой в виде множества очередей к точкам входа различных прикладных процессов. В терминологии TCP/IP такие системные очереди называются <b>портами</b>. Таким образом, адресом назначения, который используется на транспортном уровне, является идентификатор (номер) порта прикладного сервиса. Номер порта, задаваемый транспортным уровнем, в совокупности с номером сети и номером компьютера, задаваемыми сетевым уровнем, однозначно определяют прикладной процесс в сети.</p>
<p>Протокол UDP выступает простым посредником между сетевым уровнем и прикладными сервисами, и не берет на себя никаких функций по обеспечению надежности передачи. UDP является дейтаграммным протоколом, то есть он не устанавливает логического соединения, не нумерует и не упорядочивает пакеты данных. С другой стороны, функциональная простота протокола UDP обуславливает простоту его алгоритма, компактность и высокое быстродействие. Поэтому те приложения, в которых реализован собственный, достаточно надежный, механизм обмена сообщениями, основанный на установлении соединения, предпочитают для непосредственной передачи данных по сети использовать менее надежные, но более быстрые средства транспортировки. Протокол UDP может быть использован и в том случае, когда хорошее качество каналов связи обеспечивает достаточный уровень надежности и без применения дополнительных приемов типа установления логического соединения и квитирования передаваемых пакетов.</p>
<p>Заголовок UDP-пакета состоит из четырех полей: номер UDP-порта отправителя, номер UDP- порта получателя, контрольная сумма и длина дейтаграммы.</p>


<h3>Протокол TCP</h3><p>Протокол TCP (Transmission Control Protocol) так же, как и протокол UDP, работает на транспортном уровне. Он обеспечивает <b>надежную</b> транспортировку данных между прикладными процессами путем установления логического соединения.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37615/mod_lesson/page_contents/8552/Pic5_3.jpg" height="293" width="480"></p>
<p align="center">Рис. 5.3. Заголовок TCP-пакета.</p>
<p>&nbsp;&nbsp;Единицей данных протокола TCP является сегмент. Информация, поступающая к протоколу TCP в рамках логического соединения от протоколов более высокого уровня, рассматривается протоколом TCP как неструктурированный поток байт. Поступающие данные буферизуются средствами TCP. Для передачи на сетевой уровень из буфера "вырезается" некоторая непрерывная часть данных, называемая сегментом.</p>
<p>Не все сегменты, посланные через соединение, будут одного и того же размера, однако оба участника соединения должны договориться о максимальном размере сегмента, который они будут использовать. Этот размер выбирается таким образом, чтобы при упаковке сегмента в IP-пакет он помещался туда целиком, то есть максимальный размер сегмента не должен превосходить максимального размера поля данных IP-пакета. В противном случае пришлось бы выполнять фрагментацию, то есть делить сегмент на несколько частей, для того, чтобы он вместился в IP-пакет.</p>
<p>В протоколе TCP также, как и в UDP, для связи с прикладными процессами используются порты. Номера портам присваиваются аналогичным образом: имеются стандартные, зарезервированные номера (например, номер 21 закреплен за сервисом FTP, 23 - за telnet), а менее известные приложения пользуются произвольно выбранными локальными номерами.</p>
<p>Однако в протоколе TCP порты используются несколько иным способом. Для организации надежной передачи данных предусматривается установление логического соединения между двумя прикладными процессами. В рамках соединения осуществляется обязательное подтверждение правильности приема для всех переданных сообщений, и при необходимости выполняется повторная передача. Соединение в TCP позволяет вести передачу данных одновременно в обе стороны, то есть полнодуплексную передачу.</p>
<p>Соединение в протоколе TCP идентифицируется парой полных адресов обоих взаимодействующих процессов (оконечных точек). Адрес каждой из оконечных точек включает IP-адрес (номер сети и номер компьютера) и номер порта. Одна оконечная точка может участвовать в нескольких соединениях.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; При установлении соединения (рис. 5.4 а) одна из сторон является инициатором. Она посылает запрос к протоколу TCP на открытие порта для передачи (active open).</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; После открытия порта протокол TCP на стороне процесса-инициатора посылает запрос процессу, с которым требуется установить соединение.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Протокол TCP на приемной стороне открывает порт для приема данных (passive open) и возвращает квитанцию, подтверждающую прием запроса.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Для того чтобы передача могла вестись в обе стороны, протокол на приемной стороне также открывает порт для передачи (active port) и также передает запрос к противоположной стороне.</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Сторона-инициатор открывает порт для приема и возвращает квитанцию. Соединение считается установленным. Далее происходит обмен данными в рамках данного соединения.</p>
<p>Процесс завершения TCP-соединения также осуществляется в несколько этапов (рис. 5.4 б)</p>
<p>&nbsp;</p>	
<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37615/mod_lesson/page_contents/8552/Pic5_4.jpg" height="392" width="579">
</p>
<p align="center">Рис. 5.4. Установление и завершение TCP-соединения (TCP-сессия)</p>


<h1>21. TCP-сессия. Начало и завершение обмена. Методы организации повторных передач</h1>
<p>В рамках соединения правильность передачи каждого сегмента должна подтверждаться квитанцией получателя. <b>Квитирование</b> - это один из традиционных методов обеспечения надежной связи. Идея квитирования состоит в следующем.</p>
<p>Для того, чтобы можно было организовать повторную передачу искаженных данных отправитель нумерует отправляемые единицы передаваемых данных (далее для простоты называемые кадрами). Для каждого кадра отправитель ожидает от приемника так называемую положительную квитанцию - служебное сообщение, извещающее о том, что исходный кадр был получен и данные в нем оказались корректными. Время этого ожидания ограничено - при отправке каждого кадра передатчик запускает таймер, и если по его истечению положительная квитанция на получена, то кадр считается утерянным. В некоторых протоколах приемник, в случае получения кадра с искаженными данными должен отправить отрицательную квитанцию - явное указание того, что данный кадр нужно передать повторно.</p>
<p>Существуют два подхода к организации процесса обмена положительными и отрицательными квитанциями: с простоями и с организацией "окна".</p>
<p><b>Метод с простоями</b> требует, чтобы источник, пославший кадр, ожидал получения квитанции (положительной или отрицательной) от приемника и только после этого посылал следующий кадр (или повторял искаженный). В этом случае производительность обмена данными существенно снижается - хотя передатчик и мог бы послать следующий кадр сразу же после отправки предыдущего, он обязан ждать прихода квитанции. Снижение производительности для этого метода коррекции особенно заметно на низкоскоростных каналах связи, то есть в территориальных сетях.</p>

<p align="center">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37615/mod_lesson/page_contents/8553/Pic5_5.jpg" height="276" width="443">
</p>
<p align="center">Рис. 5.5. Метод подтверждения корректности передачи кадров с простоем источника</p>
<p>В методе «окна» для повышения коэффициента использования линии источнику разрешается передать некоторое количество кадров в непрерывном режиме, то есть в максимально возможном для источника темпе, без получения на эти кадры ответных квитанций. Количество кадров, которые разрешается передавать таким образом, называется размером окна. Обычно кадры при обмене нумеруются циклически, от 1 до W. При отправке кадра с номером 1 источнику разрешается передать еще W-1 кадров до получения квитанции на кадр 1. Если же за это время квитанция на кадр 1 так и не пришла, то процесс передачи приостанавливается, и по истечению некоторого тайм-аута кадр 1 считается утерянным (или квитанция на него утеряна) и он передается снова.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37615/mod_lesson/page_contents/8553/Pic5_6.jpg" height="198" width="414"></p>
<p align="center">Рис. 5.6. Метод скользящего "окна" - непрерывная отправка пакетов</p>
<p>Если же поток квитанций поступает более-менее регулярно, в пределах допуска в W кадров, то скорость обмена достигает максимально возможной величины для данного канала и принятого протокола. Этот алгоритм называют алгоритмом скользящего окна. Действительно, при каждом получении квитанции окно перемещается (скользит), захватывая новые данные, которые разрешается передавать без подтверждения.</p>
<p>Квитанция посылается только в случае правильного приема данных, отрицательные квитанции не посылаются. Таким образом, отсутствие квитанции означает либо прием искаженного сегмента, либо потерю сегмента, либо потерю квитанции.</p>
<p>В качестве квитанции получатель сегмента отсылает ответное сообщение (сегмент), в которое помещает число, на единицу превышающее максимальный номер байта в полученном сегменте. Если размер окна равен W, а последняя квитанция содержала значение N, то отправитель может посылать новые сегменты до тех пор, пока в очередной сегмент не попадет байт с номером N+W. Этот сегмент выходит за рамки окна, и передачу в таком случае необходимо приостановить до прихода следующей квитанции.</p>
<p>Варьируя величину окна, можно повлиять на загрузку сети. Чем больше окно, тем большую порцию неподтвержденных данных можно послать в сеть. Если сеть не справляется с нагрузкой, то возникают очереди в промежуточных узлах-маршрутизаторах и в конечных узлах-компьютерах.</p>
<p>При переполнении приемного буфера конечного узла "перегруженный" протокол TCP, отправляя квитанцию, помещает в нее новый, уменьшенный размер окна. Если он совсем отказывается от приема, то в квитанции указывается окно нулевого размера. Однако даже после этого приложение может послать сообщение на отказавшийся от приема порт. Для этого, сообщение должно сопровождаться пометкой "срочно" (бит URG в запросе установлен в 1). В такой ситуации порт обязан принять сегмент, даже если для этого придется вытеснить из буфера уже находящиеся там данные.</p>
<p>После приема квитанции с нулевым значением окна протокол-отправитель время от времени делает контрольные попытки продолжить обмен данными. Если протокол-приемник уже готов принимать информацию, то в ответ на контрольный запрос он посылает квитанцию с указанием ненулевого размера окна.</p>


<h1>22. Служебный протокол ICMP. Примеры практического применения</h1>
<p>Протокол обмена управляющими сообщениями ICMP (Internet Control Message Protocol) позволяет маршрутизатору сообщить конечному узлу об ошибках, с которыми машрутизатор столкнулся при передаче какого-либо IP-пакета от данного конечного узла.</p>
<p>Управляющие сообщения ICMP не могут направляться промежуточному маршрутизатору, который участвовал в передаче пакета, с которым возникли проблемы, так как для такой посылки нет адресной информации - пакет несет в себе только адрес источника и адрес назначения, не фиксируя адреса промежуточных маршрутизаторов.</p>
<p>Протокол ICMP - это протокол сообщения об ошибках, а не протокол коррекции ошибок. Конечный узел может предпринять некоторые действия для того, чтобы ошибка больше не возникала, но эти действия протоколом ICMP не регламентируются.</p>
<p>Каждое сообщение протокола ICMP передается по сети внутри пакета IP. Пакеты IP с сообщениями ICMP маршрутизируются точно так же, как и любые другие пакеты, без приоритетов, поэтому они также могут теряться. Кроме того, в загруженной сети они могут вызывать дополнительную загрузку маршрутизаторов. Для того, чтобы не вызывать лавины сообщения об ошибках, потери пакетов IP, переносящие сообщения ICMP об ошибках, не могут порождать новые сообщения ICMP.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37615/mod_lesson/page_contents/8554/Pic5_7.jpg" height="356" width="530"></p>
<p align="center">Рис. 5.7. Заголовок ICMP-пакета.</p>
<p>Существует несколько типов сообщений ICMP. Каждый тип сообщения имеет свой формат, при этом все они начинаются с общих трех полей: 8-битного целого числа, обозначающего тип сообщения (TYPE), 8-битного поля кода (CODE), который конкретизирует назначение сообщения, и 16-битного поля контрольной суммы (CHECKSUM). Кроме того, сообщение ICMP всегда содержит заголовок и первые 64 бита данных пакета IP, который вызвал ошибку. Это делается для того, чтобы узел-отправитель смог более точно проанализировать причину ошибки, так как все протоколы прикладного уровня стека TCP/IP содержат наиболее важную информацию для анализа в первых 64 битах своих сообщений.</p>
<p>Поле типа может иметь следующие значения:</p>
<table style="width: 100%;" border="1" cellpadding="0">
<tbody>
<tr>
<td>
<p align="center"><b>Значение</b></p>
</td>
<td>
<p><b>Тип сообщения</b></p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>0</b></p>
</td>
<td>
<p>Эхо-ответ (Echo Replay)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>3</b></p>
</td>
<td>
<p>Узел назначения недостижим (Destination Unreachable)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>4</b></p>
</td>
<td>
<p>Подавление источника (Source Quench)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>5</b></p>
</td>
<td>
<p>Перенаправление маршрута (Redirect)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>8</b></p>
</td>
<td>
<p>Эхо-запрос (Echo Request)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>11 </b></p>
</td>
<td>
<p>Истечение времени дейтаграммы (Time Exceeded for a Datagram)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>12</b></p>
</td>
<td>
<p>Проблема с параметром пакета (Parameter Problem on a Datagram)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>13 </b></p>
</td>
<td>
<p>Запрос отметки времени (Timestamp Request)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>14</b></p>
</td>
<td>
<p>Ответ отметки времени (Timestamp Replay)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>17</b></p>
</td>
<td>
<p>Запрос маски (Address Mask Request)</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>18</b></p>
</td>
<td>
<p>Ответ маски (Address Mask Replay)</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Протокол ICMP предоставляет сетевым администраторам средства для тестирования достижимости узлов сети. Эти средства представляют собой очень простой эхо-протокол, включающий обмен двумя типами сообщений: эхо-запрос и эхо-ответ. Компьютер или маршрутизатор посылают по интерсети эхо-запрос, в котором указывают IP-адрес узла, достижимость которого нужно проверить. Узел, который получает эхо-запрос, формирует и отправляет эхо-ответ и возвращает сообщение узлу - отправителю запроса. В запросе могут содержаться некоторые данные, которые должны быть возвращены в ответе. Так как эхо-запрос и эхо-ответ передаются по сети внутри IP-пакетов, то их успешная доставка означает нормальное функционирование всей транспортной системы интерсети.</p>
<p>Во многих операционных системах используется утилита ping, которая предназначена для тестирования достижимости узлов. Эта утилита обычно посылает серию эхо-запросов к тестируемому узлу и предоставляет пользователю статистику об утерянных эхо-ответах и среднем времени реакции сети на запросы.</p>
<p>Когда маршрутизатор не может передать или доставить IP-пакет, он отсылает узлу, отправившему этот пакет, сообщение "Узел назначения недостижим" (тип сообщения - 3). Это сообщение содержит в поле кода значение, уточняющее причину, по которой пакет не был доставлен. Причина кодируется следующим образом:</p>
<table style="width: 100%;" border="1" cellpadding="0">
<tbody>
<tr>
<td>
<p align="center"><b>Код</b></p>
</td>
<td>
<p><b>Причина</b></p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>0</b></p>
</td>
<td>
<p>Сеть недостижима</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>1</b></p>
</td>
<td>
<p>Узел недостижим</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>2 </b></p>
</td>
<td>
<p>Протокол недостижим</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>3</b></p>
</td>
<td>
<p>Порт недостижим</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>4</b></p>
</td>
<td>
<p>Требуется фрагментация, а бит DF установлен</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>5</b></p>
</td>
<td>
<p>Ошибка в маршруте, заданном источником</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>6</b></p>
</td>
<td>
<p>Сеть назначения неизвестна</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>7</b></p>
</td>
<td>
<p>Узел назначения неизвестен</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>8</b></p>
</td>
<td>
<p>Узел-источник изолирован</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>9</b></p>
</td>
<td>
<p>Взаимодействие с сетью назначения административно запрещено</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>10</b></p>
</td>
<td>
<p>Взаимодействие с узлом назначения административно запрещено</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>11</b></p>
</td>
<td>
<p>Сеть недостижима для заданного класса сервиса</p>
</td>
</tr>
<tr>
<td>
<p align="center"><b>12</b></p>
</td>
<td>
<p>Узел недостижим для заданного класса сервиса</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Маршрутизатор, обнаруживший по какой-либо причине, что он не может передать IP-пакет далее по сети, должен отправить ICMP-сообщение узлу-источнику, и только потом отбросить пакет. Кроме причины ошибки, ICMP-сообщение включает также заголовок недоставленного пакета и его первые 64 бита поля данных.</p>
<p>Узел или сеть назначения могут быть недостижимы из-за временной неработоспособности аппаратуры, из-за того, что отправитель указал неверный адрес назначения, а также из-за того, что маршрутизатор не имеет данных о маршруте к сети назначения.</p>
<p>Недостижимость протокола и порта означают отсутствие реализации какого-либо протокола прикладного уровня в узле назначения или же отсутствие открытого порта протоколов UDP или TCP в узле назначения.</p>


<h1>23. Понятие маршрутизации. Таблица маршрутизации. Алгоритмы маршрутизации. Принцип оптимальности маршрута</h1>
<h3>Принципы маршрутизация в IP-сетях</h3>
<p>Протокол IP предназначен для объединенной сети, состоящей из соединенных друг с другом шлюзами отдельных разнородных пакетных подсетей, к которым подключаются разнородные машины.</p>
<p>Каждая из подсетей работает в соответствии со своими специфическими требованиями и имеет свою природу средств связи.</p>
<p>Однако предполагается, что каждая подсеть может принять пакет информации (данные с соответствующим сетевым заголовком) и доставить его по указанному адресу в этой конкретной подсети. Не требуется, чтобы подсеть гарантировала обязательную доставку пакетов и имела надежный сквозной протокол. Таким образом, две машины, подключенные к одной подсети, могут обмениваться пакетами.</p>
<p>Когда необходимо передать пакет между машинами, подключенными к разным подсетям, то машина-отправитель посылает пакет в соответствующий маршрутизатор или шлюз (шлюз подключен к подсети также как обычный узел).</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37617/mod_lesson/page_contents/8555/Pic5_8.jpg" height="346" width="355"></p>
<p align="center">Рис. 5.8. Пример IP-сети с маршрутизацией.</p>
<p>&nbsp;</p>
<p>Шлюз (gateway)– любое сетевое оборудование с несколькими сетевыми интерфейсами и осуществляющее продвижение пакетов между сетями на уровне протоколов сетевого уровня.</p>
<p>Из шлюза пакет направляется по определенному маршруту через систему шлюзов и подсетей, пока не достигнет шлюза, подключенного к той же подсети, что и машина-получатель; там пакет направляется к получателю.</p>
<p>Таким образом, шлюз выполняет маршрутизацию – процедуру нахождения в структуре сети пути достижения получателя (построение пути доставки пакетов).</p>
<p>Если хост подключен к нескольким сетям, он должен иметь несколько сетевых адресов, как минимум столько, сколько каналов к нему подключено.</p>
<p>Даже если хост не является шлюзом между подсетями, все равно в нем присутствует таблица маршрутизации, ведь любой хост должен отправлять пакеты напрямую членам своей подсети, через какой-то шлюз другим подсетям и не передавать в сеть пакеты, предназначенные самому себе (заворачивать их по внутренней петле 127.0.0.1).</p>
<p>Правила маршрутизации&nbsp; определяют куда и как должны посылаться пакеты для разных сетей. Часто набор правил маршрутизации на хосте или шлюзе называют таблицей маршрутизации.</p>
<p>Каждое правило состоит из следующих компонентов:</p>
<p>1. Начальный адрес подсети, порядок достижения которой описывает правило.</p>
<p>2. Маска подсети, которую описывает правило.</p>
<p>3. Шлюз показывает, на какой адрес будут посланы пакеты, идущие в сеть назначения. Если пакеты будут идти напрямую, то указывается собственный адрес (точнее тот адрес того канала, через который будут передаваться пакеты).</p>
<p>4. Интерфейс показывает через какой сетевой адаптер (его номер или IP адрес) должен посылаться пакет в заданную сеть;</p>
<p>5. Метрика показывает время за которое пакет может достигнуть сети получателя (величина условная и может быть изменена при маршрутизации). Если имеется несколько правил достижения одной сети, пакеты посылаются по правилу с наименьшей метрикой.</p>
<p>Применение правила заключается в определении, принадлежит ли хост назначения сети, указанной в правиле, и если принадлежит, то пакет отправляется на адрес шлюза через интерфейс.</p>


<h3>Обмен маршрутной информацией в IP-сетях</h3>
<p>Основная задача сетей - транспортировка информации от ЭВМ-отправителя к ЭВМ-получателю. В большинстве случаев для этого нужно совершить несколько пересылок. Проблему выбора пути решают алгоритмы маршрутизации.</p>
<p>Алгоритм маршрутизации должен обладать вполне определенными свойствами: надежностью, корректностью, стабильностью, простотой и оптимальностью. Алгоритмы маршрутизации бывают адаптивными и неадаптивными. Вторые, осуществляя выбор маршрута, не принимают во внимание существующую в данный момент топологию или загрузку каналов. Такие алгоритмы называются также статическими. Адаптивные же алгоритмы предполагают периодическое измерение характеристик каналов и постоянное исследование топологии маршрутов. Выбор того или иного маршрута здесь производится на основании этих измерений. Адаптивные алгоритмы в свою очередь делятся на две группы, каждая из которых связана с одним из следующих типов:</p>
<p>а) дистанционно-векторный алгоритм (Distance Vector Algorithms, DVA),</p>
<p>б) алгоритм состояния связей (Link State Algorithms, LSA).</p>
<p>В <b>алгоритмах дистанционно-векторного типа</b> каждый маршрутизатор периодически и широковещательно рассылает по сети вектор расстояний от себя до всех известных ему сетей. Под расстоянием обычно понимается число промежуточных маршрутизаторов через которые пакет должен пройти прежде, чем попадет в соответствующую сеть. Может использоваться и другая метрика, учитывающая не только число перевалочных пунктов, но и время прохождения пакетов по связи между соседними маршрутизаторами. Получив вектор от соседнего маршрутизатора, каждый маршрутизатор добавляет к нему информацию об известных ему других сетях, о которых он узнал непосредственно (если они подключены к его портам) или из аналогичных объявлений других маршрутизаторов, а затем снова рассылает новое значение вектора по сети. В конце-концов, каждый маршрутизатор узнает информацию об имеющихся в интерсети сетях и о расстоянии до них через соседние маршрутизаторы.</p>
<p>Дистанционно-векторные алгоритмы хорошо работают только в небольших сетях. В больших сетях они засоряют линии связи интенсивным широковещательным трафиком, к тому же изменения конфигурации могут отрабатываться по этому алгоритму не всегда корректно, так как маршрутизаторы не имеют точного представления о топологии связей в сети, а располагают только обобщенной информацией - вектором дистанций, к тому же полученной через посредников. Работа маршрутизатора в соответствии с дистанционно-векторным протоколом напоминает работу моста, так как точной топологической картины сети такой маршрутизатор не имеет.</p>
<p>Наиболее распространенным протоколом, основанным на дистанционно-векторном алгоритме, является протокол RIP - один из старейших протоколов обмена маршрутной информацией, однако он до сих пор чрезвычайно распространен в вычислительных сетях. В этом протоколе все сети имеют номера (способ образования номера зависит от используемого в сети протокола сетевого уровня), а все маршрутизаторы - идентификаторы. Протокол RIP широко использует понятие "вектор расстояний". Вектор расстояний представляет собой набор пар чисел, являющихся номерами сетей и расстояниями до них в хопах.</p>
<p>Вектора расстояний итерационно распространяются маршрутизаторами по сети, и через несколько шагов каждый маршрутизатор имеет данные о достижимых для него сетях и о расстояниях до них. Если связь с какой-либо сетью обрывается, то маршрутизатор отмечает этот факт тем, что присваивает элементу вектора, соответствующему расстоянию до этой сети, максимально возможное значение, которое имеет специальный смысл - "связи нет". Таким значением в протоколе RIP является число 16.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37617/mod_lesson/page_contents/8556/Pic5_9.jpg" height="322" width="498"></p>
<p align="center">Рис. 5.9. Работа протокола маршрутизации RIP.</p>
<p>На рис. 5.9 приведена начальная информация, содержащаяся в топологической базе маршрутизатора 2, а также информация в этой же базе после двух итераций обмена маршрутными пакетами протокола RIP. После определенного числа итераций маршрутизатор 2 будет знать о расстояниях до всех сетей интерсети, причем у него может быть несколько альтернативных вариантов отправки пакета к сети назначения. Пусть в нашем примере сетью назначения является сеть D.</p>
<p>При необходимости отправить пакет в сеть D маршрутизатор просматривает свою базу данных маршрутов и выбирает порт, имеющий наименьшее расстояния до сети назначения (в данном случае порт, связывающий его с маршрутизатором 3).</p>
<p>Для адаптации к изменению состояния связей и оборудования с каждой записью таблицы маршрутизации связан таймер. Если за время тайм-аута не придет новое сообщение, подтверждающее этот маршрут, то он удаляется из маршрутной таблицы.</p>
<p>При использовании протокола RIP работает эвристический алгоритм динамического программирования Беллмана-Форда, и решение, найденное с его помощью является не оптимальным, а близким к оптимальному. Преимуществом протокола RIP является его вычислительная простота, а недостатками - увеличение трафика при периодической рассылке широковещательных пакетов и неоптимальность найденного маршрута.</p>
<p><b>Алгоритмы состояния связей</b> обеспечивают каждый маршрутизатор информацией, достаточной для построения точного графа связей сети. Все маршрутизаторы работают на основании одинаковых графов, что делает процесс маршрутизации более устойчивым к изменениям конфигурации. Широковещательная рассылка используется здесь только при изменениях состояния связей, что происходит в надежных сетях не так часто.</p>
<p>Для того, чтобы понять, в каком состоянии находятся линии связи, подключенные к его портам, маршрутизатор периодически обменивается короткими пакетами со своими ближайшими соседями. Этот трафик также широковещательный, но он циркулирует только между соседями и поэтому не так засоряет сеть.</p>
<p>Протоколом, основанным на алгоритме состояния связей, в стеке TCP/IP является протокол OSPF. Протокол OSPF (Open Shortest Path First) является достаточно современной реализацией алгоритма состояния связей (он принят в 1991 году) и обладает многими особенностями, ориентированными на применение в больших гетерогенных сетях.</p>
<p>Протокол OSPF вычисляет маршруты в IP-сетях, сохраняя при этом другие протоколы обмена маршрутной информацией. Непосредственно связанные (то есть достижимые без использования промежуточных маршрутизаторов) маршрутизаторы называются "соседями". Каждый маршрутизатор хранит информацию о том, в каком состоянии по его мнению находится сосед. Маршрутизатор полагается на соседние маршрутизаторы и передает им пакеты данных только в том случае, если он уверен, что они полностью работоспособны. Для выяснения состояния связей маршрутизаторы-соседи достаточно часто обмениваются короткими сообщениями HELLO.</p>
<p>Для распространения по сети данных о состоянии связей маршрутизаторы обмениваются сообщениями другого типа. Эти сообщения называются router links advertisement - объявление о связях маршрутизатора (точнее, о состоянии связей). OSPF-маршрутизаторы обмениваются не только своими, но и чужими объявлениями о связях, получая в конце-концов информацию о состоянии всех связей сети. Эта информация и образует граф связей сети, который, естественно, один и тот же для всех маршрутизаторов сети.</p>
<p>Кроме информации о соседях, маршрутизатор в своем объявлении перечисляет IP-подсети, с которыми он связан непосредственно, поэтому после получения информации о графе связей сети, вычисление маршрута до каждой сети производится непосредственно по этому графу по алгоритму Дэйкстры. Более точно, маршрутизатор вычисляет путь не до конкретной сети, а до маршрутизатора, к которому эта сеть подключена. Каждый маршрутизатор имеет уникальный идентификатор, который передается в объявлении о состояниях связей. Такой подход дает возможность не тратить IP-адреса на связи типа "точка-точка" между маршрутизаторами, к которым не подключены рабочие станции.</p>
<p>Маршрутизатор вычисляет оптимальный маршрут до каждой адресуемой сети, но запоминает только первый промежуточный маршрутизатор из каждого маршрута. Таким образом, результатом вычислений оптимальных маршрутов является список строк, в которых указывается номер сети и идентификатор маршрутизатора, которому нужно переслать пакет для этой сети. Указанный список маршрутов и является маршрутной таблицей, но вычислен он на основании полной информации о графе связей сети, а не частичной информации, как в протоколе RIP.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37617/mod_lesson/page_contents/8556/Pic5_10.jpg" height="245" width="284"></p>
<p align="center">Рис. 5.10. Граф связей сети, построенный протоколом OSPF.</p>
<p>&nbsp;</p>
<p>В OSPF сети могут иметь различное число хостов и могут перекрываться. Под перекрытием понимается наличие нескольких маршрутов к одной и той же сети. В этом случае адрес сети в пришедшем пакете может совпасть с адресом сети, присвоенным нескольким портам.</p>
<p>Если адрес принадлежит нескольким подсетям в базе данных маршрутов, то продвигающий пакет маршрутизатор использует наиболее специфический маршрут, то есть адрес подсети, имеющей более длинную маску.</p>
<p>Когда маршрутизатор начинает работать в первый раз (то есть инсталлируется), он пытается синхронизировать свою базу данных со всеми маршрутизаторами транзитной локальной сети, которые по определению имеют идентичные базы данных. Для упрощения и оптимизации этого процесса в протоколе OSPF используется понятие "выделенного" маршрутизатора, который выполняет две функции.</p>
<p>Во-первых, выделенный маршрутизатор и его резервный "напарник" являются единственными маршрутизаторами, с которыми новый маршрутизатор будет синхронизировать свою базу. Синхронизировав базу с выделенным маршрутизатором, новый маршрутизатор будет синхронизирован со всеми маршрутизаторами данной локальной сети.</p>
<p>Во-вторых, выделенный маршрутизатор делает объявление о сетевых связях, перечисляя своих соседей по подсети. Другие маршрутизаторы просто объявляют о своей связи с выделенным маршрутизатором. Это делает объявления о связях (которых много) более краткими, размером с объявление о связях отдельной сети.</p>
<p>В протоколе OSPF используется несколько временных параметров, и среди них наиболее важными являются интервал сообщения HELLO и интервал отказа маршрутизатора (router dead interval).</p>
<p>HELLO - это сообщение, которым обмениваются соседние, то есть непосредственно связанные маршрутизаторы подсети, с целью установить состояние линии связи и состояние маршрутизатора-соседа. В сообщении HELLO маршрутизатор передает свои рабочие параметры и говорит о том, кого он рассматривает в качестве своих ближайших соседей. Маршрутизаторы с разными рабочими параметрами игнорируют сообщения HELLO друг друга, поэтому неверно сконфигурированные маршрутизаторы не будут влиять на работу сети. Каждый маршрутизатор шлет сообщение HELLO каждому своему соседу по крайней мере один раз на протяжении интервала HELLO. Если интервал отказа маршрутизатора истекает без получения сообщения HELLO от соседа, то считается, что сосед неработоспособен, и распространяется новое объявление о сетевых связях, чтобы в сети произошел пересчет маршрутов.</p>


<h1>25. Динамическая маршрутизация по вектору расстояний (протокол RIP)</h1>
<p>В <b>алгоритмах дистанционно-векторного типа</b> каждый маршрутизатор периодически и широковещательно рассылает по сети вектор расстояний от себя до всех известных ему сетей. Под расстоянием обычно понимается число промежуточных маршрутизаторов через которые пакет должен пройти прежде, чем попадет в соответствующую сеть. Может использоваться и другая метрика, учитывающая не только число перевалочных пунктов, но и время прохождения пакетов по связи между соседними маршрутизаторами. Получив вектор от соседнего маршрутизатора, каждый маршрутизатор добавляет к нему информацию об известных ему других сетях, о которых он узнал непосредственно (если они подключены к его портам) или из аналогичных объявлений других маршрутизаторов, а затем снова рассылает новое значение вектора по сети. В конце-концов, каждый маршрутизатор узнает информацию об имеющихся в интерсети сетях и о расстоянии до них через соседние маршрутизаторы.</p>
<p>Дистанционно-векторные алгоритмы хорошо работают только в небольших сетях. В больших сетях они засоряют линии связи интенсивным широковещательным трафиком, к тому же изменения конфигурации могут отрабатываться по этому алгоритму не всегда корректно, так как маршрутизаторы не имеют точного представления о топологии связей в сети, а располагают только обобщенной информацией - вектором дистанций, к тому же полученной через посредников. Работа маршрутизатора в соответствии с дистанционно-векторным протоколом напоминает работу моста, так как точной топологической картины сети такой маршрутизатор не имеет.</p>
<p>Наиболее распространенным протоколом, основанным на дистанционно-векторном алгоритме, является протокол RIP - один из старейших протоколов обмена маршрутной информацией, однако он до сих пор чрезвычайно распространен в вычислительных сетях. В этом протоколе все сети имеют номера (способ образования номера зависит от используемого в сети протокола сетевого уровня), а все маршрутизаторы - идентификаторы. Протокол RIP широко использует понятие "вектор расстояний". Вектор расстояний представляет собой набор пар чисел, являющихся номерами сетей и расстояниями до них в хопах.</p>
<p>Вектора расстояний итерационно распространяются маршрутизаторами по сети, и через несколько шагов каждый маршрутизатор имеет данные о достижимых для него сетях и о расстояниях до них. Если связь с какой-либо сетью обрывается, то маршрутизатор отмечает этот факт тем, что присваивает элементу вектора, соответствующему расстоянию до этой сети, максимально возможное значение, которое имеет специальный смысл - "связи нет". Таким значением в протоколе RIP является число 16.</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37617/mod_lesson/page_contents/8556/Pic5_9.jpg" height="322" width="498"></p>
<p align="center">Рис. 5.9. Работа протокола маршрутизации RIP.</p>
<p>На рис. 5.9 приведена начальная информация, содержащаяся в топологической базе маршрутизатора 2, а также информация в этой же базе после двух итераций обмена маршрутными пакетами протокола RIP. После определенного числа итераций маршрутизатор 2 будет знать о расстояниях до всех сетей интерсети, причем у него может быть несколько альтернативных вариантов отправки пакета к сети назначения. Пусть в нашем примере сетью назначения является сеть D.</p>
<p>При необходимости отправить пакет в сеть D маршрутизатор просматривает свою базу данных маршрутов и выбирает порт, имеющий наименьшее расстояния до сети назначения (в данном случае порт, связывающий его с маршрутизатором 3).</p>
<p>Для адаптации к изменению состояния связей и оборудования с каждой записью таблицы маршрутизации связан таймер. Если за время тайм-аута не придет новое сообщение, подтверждающее этот маршрут, то он удаляется из маршрутной таблицы.</p>
<p>При использовании протокола RIP работает эвристический алгоритм динамического программирования Беллмана-Форда, и решение, найденное с его помощью является не оптимальным, а близким к оптимальному. Преимуществом протокола RIP является его вычислительная простота, а недостатками - увеличение трафика при периодической рассылке широковещательных пакетов и неоптимальность найденного маршрута.</p>





<h1>26. Маршрутизация с учетом состояния линий (протокол OSPF)</h1>
<p><b>Алгоритмы состояния связей</b> обеспечивают каждый маршрутизатор информацией, достаточной для построения точного графа связей сети. Все маршрутизаторы работают на основании одинаковых графов, что делает процесс маршрутизации более устойчивым к изменениям конфигурации. Широковещательная рассылка используется здесь только при изменениях состояния связей, что происходит в надежных сетях не так часто.</p>
<p>Для того, чтобы понять, в каком состоянии находятся линии связи, подключенные к его портам, маршрутизатор периодически обменивается короткими пакетами со своими ближайшими соседями. Этот трафик также широковещательный, но он циркулирует только между соседями и поэтому не так засоряет сеть.</p>
<p>Протоколом, основанным на алгоритме состояния связей, в стеке TCP/IP является протокол OSPF. Протокол OSPF (Open Shortest Path First) является достаточно современной реализацией алгоритма состояния связей (он принят в 1991 году) и обладает многими особенностями, ориентированными на применение в больших гетерогенных сетях.</p>
<p>Протокол OSPF вычисляет маршруты в IP-сетях, сохраняя при этом другие протоколы обмена маршрутной информацией. Непосредственно связанные (то есть достижимые без использования промежуточных маршрутизаторов) маршрутизаторы называются "соседями". Каждый маршрутизатор хранит информацию о том, в каком состоянии по его мнению находится сосед. Маршрутизатор полагается на соседние маршрутизаторы и передает им пакеты данных только в том случае, если он уверен, что они полностью работоспособны. Для выяснения состояния связей маршрутизаторы-соседи достаточно часто обмениваются короткими сообщениями HELLO.</p>
<p>Для распространения по сети данных о состоянии связей маршрутизаторы обмениваются сообщениями другого типа. Эти сообщения называются router links advertisement - объявление о связях маршрутизатора (точнее, о состоянии связей). OSPF-маршрутизаторы обмениваются не только своими, но и чужими объявлениями о связях, получая в конце-концов информацию о состоянии всех связей сети. Эта информация и образует граф связей сети, который, естественно, один и тот же для всех маршрутизаторов сети.</p>
<p>Кроме информации о соседях, маршрутизатор в своем объявлении перечисляет IP-подсети, с которыми он связан непосредственно, поэтому после получения информации о графе связей сети, вычисление маршрута до каждой сети производится непосредственно по этому графу по алгоритму Дэйкстры. Более точно, маршрутизатор вычисляет путь не до конкретной сети, а до маршрутизатора, к которому эта сеть подключена. Каждый маршрутизатор имеет уникальный идентификатор, который передается в объявлении о состояниях связей. Такой подход дает возможность не тратить IP-адреса на связи типа "точка-точка" между маршрутизаторами, к которым не подключены рабочие станции.</p>
<p>Маршрутизатор вычисляет оптимальный маршрут до каждой адресуемой сети, но запоминает только первый промежуточный маршрутизатор из каждого маршрута. Таким образом, результатом вычислений оптимальных маршрутов является список строк, в которых указывается номер сети и идентификатор маршрутизатора, которому нужно переслать пакет для этой сети. Указанный список маршрутов и является маршрутной таблицей, но вычислен он на основании полной информации о графе связей сети, а не частичной информации, как в протоколе RIP.</p>
<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37617/mod_lesson/page_contents/8556/Pic5_10.jpg" height="245" width="284"></p>
<p align="center">Рис. 5.10. Граф связей сети, построенный протоколом OSPF.</p>
<p>&nbsp;</p>
<p>В OSPF сети могут иметь различное число хостов и могут перекрываться. Под перекрытием понимается наличие нескольких маршрутов к одной и той же сети. В этом случае адрес сети в пришедшем пакете может совпасть с адресом сети, присвоенным нескольким портам.</p>
<p>Если адрес принадлежит нескольким подсетям в базе данных маршрутов, то продвигающий пакет маршрутизатор использует наиболее специфический маршрут, то есть адрес подсети, имеющей более длинную маску.</p>
<p>Когда маршрутизатор начинает работать в первый раз (то есть инсталлируется), он пытается синхронизировать свою базу данных со всеми маршрутизаторами транзитной локальной сети, которые по определению имеют идентичные базы данных. Для упрощения и оптимизации этого процесса в протоколе OSPF используется понятие "выделенного" маршрутизатора, который выполняет две функции.</p>
<p>Во-первых, выделенный маршрутизатор и его резервный "напарник" являются единственными маршрутизаторами, с которыми новый маршрутизатор будет синхронизировать свою базу. Синхронизировав базу с выделенным маршрутизатором, новый маршрутизатор будет синхронизирован со всеми маршрутизаторами данной локальной сети.</p>
<p>Во-вторых, выделенный маршрутизатор делает объявление о сетевых связях, перечисляя своих соседей по подсети. Другие маршрутизаторы просто объявляют о своей связи с выделенным маршрутизатором. Это делает объявления о связях (которых много) более краткими, размером с объявление о связях отдельной сети.</p>
<p>В протоколе OSPF используется несколько временных параметров, и среди них наиболее важными являются интервал сообщения HELLO и интервал отказа маршрутизатора (router dead interval).</p>
<p>HELLO - это сообщение, которым обмениваются соседние, то есть непосредственно связанные маршрутизаторы подсети, с целью установить состояние линии связи и состояние маршрутизатора-соседа. В сообщении HELLO маршрутизатор передает свои рабочие параметры и говорит о том, кого он рассматривает в качестве своих ближайших соседей. Маршрутизаторы с разными рабочими параметрами игнорируют сообщения HELLO друг друга, поэтому неверно сконфигурированные маршрутизаторы не будут влиять на работу сети. Каждый маршрутизатор шлет сообщение HELLO каждому своему соседу по крайней мере один раз на протяжении интервала HELLO. Если интервал отказа маршрутизатора истекает без получения сообщения HELLO от соседа, то считается, что сосед неработоспособен, и распространяется новое объявление о сетевых связях, чтобы в сети произошел пересчет маршрутов.</p>






<h1>28. Протокол IP следующего поколения (IPv6). Принципы адресации и передачи данных</h1>
<p>Протокол IPv6 является развитием протокола IP и, в первую очередь, призван решить одну из главных проблем на сегодняшний момент – исчерпание доступного адресного пространства традиционного IPv4 (который рассматривается нами вплоть до этого раздела).</p>
<p>В предложении IETF протокол IPv6 оставляет основные принципы IPv4 неизменными. К ним относятся дейтаграммный метод работы, фрагментация пакетов, разрешение отправителю задавать максимальное число хопов для своих пакетов. Однако, в деталях реализации протокола IPv6 имеются существенные отличия от IPv4. Эти отличия коротко можно описать следующим образом.</p>
<ol>
<li>Использование более длинных адресов. Новый размер адреса - наиболее заметное отличие IPv6 от IPv4. Версия 6 использует 128-битные адреса.</li>
<li>Гибкий формат заголовка. Вместо заголовка с фиксированными полями фиксированного размера (за исключением поля Резерв), IPv6 использует базовый заголовок фиксированного формата плюс набор необязательных заголовков различного формата.</li>
<li>Поддержка резервирования пропускной способности. В IPv6 механизм резервирования пропускной способности заменяет механизм классов сервиса версии IPv4.</li>
<li>Поддержка расширяемости протокола. Это одно из наиболее значительных изменений в подходе к построению протокола - от полностью детализированного описания протокола к протоколу, который разрешает поддержку дополнительных функций.</li>
</ol>
<p>Структура IP пакетов версии 6 представлена на рис. 5.11.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37618/mod_lesson/page_contents/8557/Pic5_11.jpg" height="188" width="605"></p>
<p align="center">Рис.5.11. Структура пакета IPv6.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Версия — для IPv6 значение поля должно быть равно 6.</p>
<p>&nbsp;&nbsp;&nbsp; Приоритет – используется для того, чтобы различать пакеты с разными требованиями к доставке в реальном времени.</p>
<p>&nbsp;&nbsp;&nbsp; Метка потока – применяется для установки между отправителем и получателем псевдосоединения с определенными свойствами и требованиями. Например поток пакетов между двумя процессами на разных хостах может обладать строгими требованиями к задержкам, что потребует резервирование пропускной способности.</p>
<p>&nbsp;&nbsp;&nbsp; Длина полезной нагрузки – сообщает, сколько байт следует за 40-байтовым заголовком.</p>
<p>&nbsp;&nbsp;&nbsp; Следующий заголовок – сообщает, какой из дополнительных заголовков следует за основным.</p>
<p>&nbsp;&nbsp;&nbsp; Мах число транзитных узлов – аналог времени жизни (TTL).</p>
<p>&nbsp;&nbsp;&nbsp; Дополнительные заголовки:</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Параметры маршрутизации – разнообразная информация для маршрутизаторов;</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Параметры получения – дополнительная информация для получателя</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Маршрутизация – частичный список транзитных маршрутизаторов на пути пакета;</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Фрагментация – управление фрагментами дейтаграмм;</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Аутентификация – проверка подлинности отправителя;</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Шифрованные данные – информация о зашифрованном содержимом.</p>
<p>Существует три типа адресов:</p>
<p><b>unicast</b><b>:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Идентификатор одиночного интерфейса. Пакет, посланный по уникастному адресу, доставляется интерфейсу, указанному в адресе.</p>
<p><b>anycast</b><b>:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Идентификатор набора интерфейсов (принадлежащих разным узлам). Пакет, посланный по эникастному адресу, доставляется одному из интерфейсов, указанному в адресе (ближайший, в соответствии с мерой, определенной протоколом маршрутизации).</p>
<p><b>multicast</b><b>:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Идентификатор набора интерфейсов (обычно принадлежащих разным узлам). Пакет, посланный по мультикастинг-адресу, доставляется всем интерфейсам, заданным этим адресом.</p>
<p>В IPv6 не существует широковещательных адресов, их функции переданы мультикастинг-адресам.</p>
<p>IPv6 адреса всех типов ассоциируются с интерфейсами, а не узлами. Так как каждый интерфейс принадлежит только одному узлу, уникастный адрес интерфейса может идентифицировать узел.</p>
<p>IPv6 уникастный адрес соотносится только с одним интерфейсом. Одному интерфейсу могут соответствовать много IPv6 адресов различного типа (уникастные, эникастные и мультикстные). Существует два исключения из этого правила:</p>
<p>&nbsp;&nbsp;&nbsp; Одиночный адрес может приписываться нескольким физическим интерфейсам, если приложение рассматривает эти несколько интерфейсов как единое целое при представлении его на уровне Интернет.</p>
<p>&nbsp;&nbsp;&nbsp; Маршрутизаторы могут иметь ненумерованные интерфейсы (например, интерфейсу не присваивается никакого IPv6 адреса) для соединений точка-точка, чтобы исключить необходимость вручную конфигурировать и объявлять (advertise) эти адреса. Адреса не нужны для соединений точка-точка маршрутизаторов, если эти интерфейсы не используются в качестве точки отправления или назначения при посылке IPv6 дейтограмм. Маршрутизация здесь осуществляется по схеме близкой к используемой протоколом CIDR в IPv4.</p>
<p>IPv6 соответствует модели IPv4, где субсеть ассоциируется с каналом. Одному каналу могут соответствовать несколько субсетей.</p>
<p>Существует три стандартные формы для представления ipv6 адресов в виде текстовых строк. Основная форма имеет вид x:x:x:x:x:x:x:x, где 'x' шестнадцатеричные 16-битовые числа.</p>
<p>&nbsp;&nbsp;&nbsp; Примеры:</p>
<p>&nbsp;&nbsp;&nbsp; fedc:ba98:7654:3210:FEDC:BA98:7654:3210</p>
<p>&nbsp;&nbsp;&nbsp; 1080:0:0:0:8:800:200C:417A</p>
<p>Начальные нули в каждом из конкретных полей писать не нужно, но в каждом поле должна быть, по крайней мере, одна цифра.</p>
<p>&nbsp;&nbsp;&nbsp; Из-за метода записи некоторых типов IPv6 адресов, они часто содержат длинные последовательности нулевых бит. Для того чтобы сделать запись адресов, содержащих нулевые биты, более удобной, имеется специальный синтаксис для удаления лишних нулей. Использование записи "::" указывает на наличие групп из 16 нулевых бит. Комбинация "::" может появляться только при записи адреса. Последовательность "::" может также использоваться для удаления из записи начальных или завершающих нулей в адресе. Например:</p>
<p>&nbsp;&nbsp;&nbsp; 1080:0:0:0:8:800:200c:417a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; уникаст-адрес</p>
<p>&nbsp;&nbsp;&nbsp; ff01:0:0:0:0:0:0:43 мультикаст адрес</p>
<p>&nbsp;&nbsp;&nbsp; 0:0:0:0:0:0:0:1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; адрес обратной связи</p>
<p>&nbsp;&nbsp;&nbsp; 0:0:0:0:0:0:0:0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; неспецифицированный адрес</p>
<p>&nbsp;&nbsp;&nbsp; может быть представлено в виде:</p>
<p>&nbsp;&nbsp;&nbsp; 1080::8:800:200c:417a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; уникаст-адрес</p>
<p>&nbsp;&nbsp;&nbsp; ff01::43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; мультикаст адрес</p>
<p>&nbsp;&nbsp;&nbsp; ::1&nbsp;&nbsp;&nbsp; адрес обратной связи</p>
<p>&nbsp;&nbsp;&nbsp; ::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; не специфицированный адрес</p>
<p>&nbsp;Альтернативной формой записи, которая более удобна при работе с ipv4 и IPv6, является x:x:x:x:x:x:d.d.d.d, где 'x' шестнадцатеричные 16-битовые коды адреса, а 'd' десятичные 8-битовые, составляющие младшую часть адреса (стандартное IPv4 представление). Например:</p>
<p>0:0:0:0:0:0:13.1.68.3</p>
<p>0:0:0:0:0:FFFF:129.144.52.38</p>
<p>или в сжатом виде:</p>
<p>::13.1.68.3</p>
<p>::FFFF:129.144.52.38</p>
<p>Как и в версии IPv4, адреса в версии IPv6 делятся на классы, в зависимости от значения нескольких старших бит адреса.</p>
<p>Большая часть классов зарезервирована для будущего применения. Наиболее интересным для практического использования является класс, предназначенный для провайдеров услуг Internet, названный Provider-Assigned Unicast.</p>
<p>Адрес этого класса имеет следующую структуру:</p>
<table border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="139">
<p>010</p>
</td>
<td valign="top" width="139">
<p>Идентификатор провайдера</p>
</td>
<td valign="top" width="139">
<p>Идентификатор абонента</p>
</td>
<td valign="top" width="139">
<p>Идентификатор подсети</p>
</td>
<td valign="top" width="139">
<p>Идентификатор узла</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Каждому провайдеру услуг Internet назначается уникальный идентификатор, которым помечаются все поддерживаемые им сети. Далее провайдер назначает своим абонентам уникальные идентификаторы, и использует оба идентификатора при назначении блока адресов абонента. Абонент сам назначает уникальные идентификаторы своим подсетям и узлам этих сетей.</p>
<p>Абонент может использовать технику подсетей, применяемую в версии IPv4, для дальнейшего деления поля идентификатора подсети на более мелкие поля.</p>
<p>Описанная схема приближает схему адресации IPv6 к схемам, используемым в территориальных сетях, таких как телефонные сети или сети Х.25. Иерархия адресных полей позволит магистральным маршрутизаторам работать только со старшими частями адреса, оставляя обработку менее значимых полей маршрутизаторам абонентов.</p>
<p>Под поле идентификатора узла требуется выделения не менее 6 байт, для того чтобы можно было использовать в IP-адресах МАС-адреса локальных сетей непосредственно.</p>
<p>Для обеспечения совместимости со схемой адресации версии IPv4, в версии IPv6 имеется класс адресов, имеющих 0000 0000 в старших битах адреса. Младшие 4 байта адреса этого класса должны содержать адрес IPv4. Маршрутизаторы, поддерживающие обе версии адресов, должны обеспечивать трансляцию при передаче пакета из сети, поддерживающей адресацию IPv4, в сеть, поддерживающую адресацию IPv6, и наоборот.</p>
<p>&nbsp;</p>

<h1>12. Спутниковые системы связи. Орбиты и частоты. Принципы построения и работы. Спутниковые группировки и системы спутниковой связи</h1>
<p>Спутник может иметь много антенн, направленных на разные регионы на поверхности земли. Размер пятна “засветки” такой антенны на земле может иметь размер несколько сот километров. Обычный спутник обладает 12-20 транспондерами (приемопередатчиками), каждый из которых имеет полосу 36-50МГц, что позволяет сформировать поток данных 50 Мбит/с. Такая пропускная способность достаточна для получения 1600 высококачественных телефонных каналов (32кбит/c). Современные спутники используют узкоапертурную технологию передачи VSAT (very small aperure terminals). Такие терминалы используют антенны диаметром 1 метр и выходную мощность около 1 Вт. При этом канал к спутнику имеет пропускную способность 19,2 кбит/с, а со спутника более 512 кбит/c. Непосредственно такие терминалы не могут работать друг с другом, разумеется через телекоммуникационный спутник. Для решения этой проблемы используются промежуточные наземные антенны с большим усилением, что, правда увеличивает задержку (рис. 6.1).</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37619/mod_lesson/page_contents/8558/Pic6_1.jpg" height="223" width="447"></p>
<p align="center">Рис. 6.1. Технология передачи VSAT.</p>
<p>Терминальные наземные антены VSAT имеют диаметр 1-1,5 м и излучаемую мощность 1-4 Вт, обеспечивая широкополосность до 64 кбит/с. Такие небольшие антенны не позволяют таким терминалам общаться непосредственно. Для создания постоянных каналов телекоммуникаций служат геостационарные спутники, висящие над экватором на высоте около 36000 км.</p>
<p>Реально геостационарная орбита переполнена спутниками различного назначения и национальной принадлежности. Обычно спутники помечаются географической долготой мест, над которым они висят. На практике геостационарный спутник не стоит на месте, а выполняет движение по траектории, имеющей вид цифры 8. Угловой размер этой восьмерки должен укладываться в рабочую апертуру антенны, в противном случае антенна должна иметь сервопривод, обеспечивающий автоматическое слежение за спутником. Из-за энергетических проблем телекоммуникационный спутник не может обеспечить высокого уровня сигнала. По этой причине наземная антенна должна иметь большой диаметр, а приемное оборудование низкий уровень шума. Это особенно важно для северных областей, для которых угловое положение спутника над горизонтом невысоко (это особенно существенно для широт более 700), а сигнал проходит довольно толстый слой атмосферы и заметно ослабляется. Спутниковые каналы могут быть рентабельны для областей, отстоящих друг от друга более чем на 400-500 км (при условии что других средств не существует). Правильный выбор спутника (его долготы) может заметно снизить стоимость канала.</p>
<p>Система геостационарных спутников выглядит как ожерелье, нанизанное на невидимую глазу орбиту. Один угловой градус для такой орбиты соответствует ~600 км. Может показаться, что это огромное расстояние. Плотность спутников на орбите неравномерна - на долготе Европы и США их много, а над Тихим океаном - мало, там они просто не нужны. Спутники не вечны, время жизни обычно не превосходит 10 лет, они выходят из строя главным образом не из-за отказов оборудования, а из-за нехватки горючего для стабилизации их положения на орбите. После выхода из строя спутники остаются на своих местах, превращаясь в космический мусор. Таких спутников уже сейчас немало, со временем их станет еще больше. Конечно, можно предположить, что точность вывода на орбиту со временем станет выше, и люди научатся выводить их с точностью в 100 м. Это позволит размещать в одной “нише” 500-1000 спутников (что сегодня представляется почти невероятным, ведь нужно оставить пространство для их маневров). Человечество может таким образом создать нечто похожее на искусственное кольцо Сатурна, состоящее целиком из мертвых телекоммуникационных спутников. До этого дело вряд ли дойдет, так как будет найден способ удаления или восстановления неработающих спутников, хотя с неизбежностью это существенно удорожит услуги таких коммуникационных систем.</p>

<p align="center"><img src="http://portal.edu.asu.ru/pluginfile.php/37619/mod_lesson/page_contents/8558/Pic6_2.jpg" height="252" width="304"></p>
<p align="center">Рис. 6.2. Спутниковые системы на орбите Земли.</p>
<p>Следует также иметь в виду, что из-за вращения Земли вокруг своей оси, нужно вращать геостационарный спутник, чтобы его солнечные батареи были ориентированы на Солнце.</p>
<p>К счастью спутники, использующие разные частотные диапазоны, не конкурируют друг с другом. По этой причине в одной и той же позиции на орбите может находиться несколько спутников с разными рабочими частотами. На практике геостационарный спутник не стоит на месте, а выполняет движение по траектории, имеющей (при наблюдении с земли) вид цифры 8. Угловой размер этой восьмерки должен укладываться в рабочую апертуру антенны, в противном случае антенна должна иметь сервопривод, обеспечивающий автоматическое слежение за спутником.</p>
<p>Число позиций для размещения геостационарных спутников ограничено. В последнее время для телекоммуникаций планируется применение так называемых низкоорбитальных спутников (&lt;1000 км; период обращения ~1 час). Эти спутники движутся по эллиптическим орбитам и каждый из них по отдельности не может гарантировать стационарный канал, но в совокупности эта система обеспечивает весь спектр услуг (каждый из спутников работает в режиме “запомнить и передать”). Из-за малой высоты полета наземные станции в этом случае могут иметь небольшие антенны и малую стоимость.</p>
<p>Существует несколько способов работы совокупности наземных терминалов со спутником. При этом может использоваться мультиплексирование по частоте (FDM), по времени (TDM), CDMA (Code Division Multiple Access), ALOHA или метод запросов.</p>
<p>Схема запросов предполагает, что наземные станции образуют логическое кольцо, вдоль которого двигается маркер. Наземная станция может начать передачу на спутник, лишь получив этот маркер.</p>
<p>Простая система ALOHA (разработана группой Нормана Абрамсона из Гавайского университета в 70-х годах) позволяет каждой станции начинать передачу тогда, когда она этого захочет (aloha означает приветствие на местном диалекте). Такая схема с неизбежностью приводит к столкновениям. Связано это отчасти с тем, что передающая сторона узнает о столкновении лишь спустя ~270 мсек. После столкновения станция ожидает некоторое псевдослучайное время и совершает повторную попытку передачи еще раз. Такой алгоритм доступа обеспечивает эффективность использования канала на уровне около 18%, что совершенно недопустимо для таких дорогостоящих каналов, как спутниковые. По этой причине чаще используется доменная версия системы ALOHA, которая удваивает эффективность. Одна наземная станция (эталонная) периодически посылает специальный сигнал, который используется всеми участниками для синхронизации. Если длина временного домена равна ΔT, тогда домен с номером k начинается в момент времени kΔT по отношению к упомянутому выше сигналу. Так как часы разных станций работают немного по разному, необходима периодическая ресинхронизация. Другой проблемой является разброс времени распространения сигнала для разных станций.</p>
<p>Метод мультиплекcирования по частоте (FDM) является старейшим и наиболее часто используемым. Типичный транспондер с полосой 36 Мбит/с может быть использован для получения 500 64кбит/с ИКМ-каналов, каждый из которых работает со своей уникальной частотой, чтобы исключить интерференцию с другими. Соседние каналы должны отстоять на достаточном расстоянии друг от друга. Кроме того, должен контролироваться уровень передаваемого сигнала, так как при слишком большой выходной мощности могут возникнуть интерференционные помехи в соседнем канале. Если число станций невелико и постоянно, частотные каналы могут быть распределены стационарно. Но при переменном числе терминалов или при заметной флуктуации загрузки приходится переходить на динамическое распределение ресурсов. Одним из механизмов такого распределение имеет название SPADE (Single carrier per channel Pulse code modulated multiple Access Demand access Equipment), он использовался в первых версиях систем связи на базе INTELSAT. Каждый транспондер системы SPADE содержит 794 симплексных ИКМ-каналов по 64-кбит/c и один сигнальный канал с полосой 128 кбит/c. ИКМ-каналы используются попарно для обеспечения полнодуплексной связи. При этом восходящий и ниcходящий каналы имеют полосу по 50 Мбит/с. Сигнальный канал делится на 50 доменов по 1 мсек (128 бит). Каждый домен принадлежит одной из наземной станции, число которых не превышает 50. Когда станция готова к передаче, она произвольным образом выбирает неиспользуемый канал и записывает номер этого канала в очередной свой 128 битный домен. Если один и тот же канал попытаются занять две или более станции происходит столкновение и они вынуждены будут повторить попытку позднее.</p>
<p>Метод мультиплексирования по времени сходен с FDM и довольно широко применяется на практике. Здесь также необходима синхронизация для доменов. Это делается как и в доменной системе ALOHA c помощью эталонной станции. Присвоение доменов наземным станциям может выполняться централизовано или децентрализовано. Рассмотрим систему ACTS (Advanced Communication Technology Satellite). Система имеет 4 независимых канала (TDM) по 110 Мбит/c (два восходящих и два ниcходящих). Каждый из каналов структурированы в виде 1-милисекундных кадров, каждый из которых имеет по 1728 временных доменов. Каждый из временных доменов имеет 64-битовое поле данных, что позволяет реализовать голосовой канал с полосой в 64 кбит/c. Управление временными доменами с целью минимизации времени на перемещения вектора излучения спутника предполагает знание географического положения наземных станций. Управление временными доменами осуществляется одной из наземных станций (MCS - Master Control Station). Работа системы ACTS представляет собой трехшаговый процесс. Каждый из шагов занимает 1 мсек. На первом шаге спутник получает кадр и запоминает его в 1728-ячеечном буфере. На втором - бортовая ЭВМ копирует каждую входную запись в выходной буфер (возможно для другой антенны). И, наконец, выходная запись передается наземной станции.</p>
<p>В исходный момент каждой наземной станции ставится в соответствие один временной домен. Для получения дополнительного домена, например для организации еще одного телефонного канала, станция посылает запрос MCS. Для этих целей выделяется специальный управляющий канал емкостью 13 запросов в сек.</p>
<p>Метод CDMA (Code Division Multiple Access) не требует синхронизации и является полностью децентрализованным. Как и другие методы он не лишен недостатков. Во-первых, емкость канала CDMA в присутствии шума и отсутствии координации между станциями обычно ниже, чем в случае TDM. Во-вторых, система требует быстродействующего и более дорогого оборудования.</p>
<p>В связи с широким внедрением цифрового телевидения разработаны некоторые новые технологии, например, DVB-RCS (ETSI EN 301.790 - Digital Video Broadcasting - Return Channel via Satellite - цифровое широковещательное видео с обратным каналом через спутник). Максимальная пропускная способность - 8Мбит/с, что достаточно для HDTV. DVB-RCS является открытым стандартом для спутниковых сетей с двухсторонним обменом, этот стандарт поддерживается большинством VSAT-систем. Стандарт допускает топологию звезды и сетки с числом VSAT до 10000.</p>

<h2>2. Системы телефонной связи</h2>
<h3>Системы телефонной связи</h3>
<p>Система телефонной связи представляет собой жесткую многоуровневую иерархическую систему с высокой степенью избыточности. Абонент соединяется линией связи с ближайшей местной телефонной станцией, длина линии связи при этом может достигать до 10 км. Каждая местная (оконечная) телефонная станция имеет в свою очередь несколько соединений с междугородными станциями, которые в свою очередь соединены с т.н. коммутатором, который отвечает за обслуживание региона («зоны») и к которому подключены все ближайшие междугородные станциями региона. Эти станции связаны друг с другом межстанционными линиями или каналами, которые могут проходить через несколько коммутационных центров. Процесс обмена информацией от абонента к абоненту (телефонный разговор) проходит таким образом, чтобы не задействовать при этом станции и коммутационные центры, находящиеся на уровне, выше требуемого. Т.е. абонент, разговаривающий с абонентом своего же города, никогда не будет использовать междугородную станцию, отвечающую за обслуживание целого региона. Так сохраняется оптимальное распределение ресурсов сети телефонной связи для всех своих абонентов.</p>
<p>Доступ к телефонным станциям соответствующего уровня осуществляются через определенные коды доступа, которые являются (или могут являться) неотъемлемой частью телефонного номера абонента. Например, запросить работу с ближайшей междугородней станцией в России можно, набрав цифру/код «8». Запрос на работу с конкретной междугородней станцией, обслуживающей регион, выполняется набором кода, соответствующего (закрепленного) за этим регионом.</p>
<p>Линии связи между абонентами и оконечными телефонными станциями чаще всего выполнены в виде медных&nbsp; проводников (кабелей). Соединения между телефонными станциями осуществляются по волоконно-оптическим линиям связи.&nbsp;</p>
<p></p>
<p style="text-align: center;">
	<img src="http://portal.edu.asu.ru/pluginfile.php/37620/mod_lesson/page_contents/8559/Pic6_3.jpg" height="156" width="506">
</p>
<p style="text-align: center;">Рис. 6.3. Обмен информацией между двумя абонентами телефонной сети.</p>
</body>
</html>